<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Структуры данных | HSE UX LAB | Анализ данных + R: мир линейных моделей | Book</title>
  <meta name="description" content="Книга написана для слушателей курса по анализу данных от HSE UX LAB" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Структуры данных | HSE UX LAB | Анализ данных + R: мир линейных моделей | Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Книга написана для слушателей курса по анализу данных от HSE UX LAB" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Структуры данных | HSE UX LAB | Анализ данных + R: мир линейных моделей | Book" />
  
  <meta name="twitter:description" content="Книга написана для слушателей курса по анализу данных от HSE UX LAB" />
  

<meta name="author" content="А. Ангельгардт" />


<meta name="date" content="2021-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="типы-данных.html"/>
<link rel="next" href="функции-1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="">HSE UX LAB | WLM 2021</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i>Благодарности</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#условные-обозначения"><i class="fa fa-check"></i>Условные обозначения</a></li>
</ul></li>
<li class="part"><span><b>I R programming</b></span></li>
<li class="chapter" data-level="1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html"><i class="fa fa-check"></i><b>1</b> Знакомство с R и RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#что-это-и-откуда"><i class="fa fa-check"></i><b>1.1</b> Что это и откуда?</a></li>
<li class="chapter" data-level="1.2" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#почему-r"><i class="fa fa-check"></i><b>1.2</b> Почему R?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#а-он-лучше-питона"><i class="fa fa-check"></i><b>1.2.1</b> А он лучше Питона?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#установка-r-и-rstudio"><i class="fa fa-check"></i><b>1.3</b> Установка R и RStudio</a><ul>
<li class="chapter" data-level="1.3.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#а-зачем-обе-штуки-ставить"><i class="fa fa-check"></i><b>1.3.1</b> А зачем обе штуки ставить?</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#где-спросить-вопрос-или-искать-ответ"><i class="fa fa-check"></i><b>1.4</b> Где спросить вопрос или искать ответ?</a></li>
<li class="chapter" data-level="1.5" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#интерфейс-r"><i class="fa fa-check"></i><b>1.5</b> Интерфейс R</a></li>
<li class="chapter" data-level="1.6" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#интерфейс-rstudio"><i class="fa fa-check"></i><b>1.6</b> Интерфейс RStudio</a><ul>
<li class="chapter" data-level="1.6.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#console"><i class="fa fa-check"></i><b>1.6.1</b> Console</a></li>
<li class="chapter" data-level="1.6.2" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#code-editor"><i class="fa fa-check"></i><b>1.6.2</b> Code Editor</a></li>
<li class="chapter" data-level="1.6.3" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#environment-workspace-и-history"><i class="fa fa-check"></i><b>1.6.3</b> Environment (Workspace) и History</a></li>
<li class="chapter" data-level="1.6.4" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#plots-files-packages-help-viewer"><i class="fa fa-check"></i><b>1.6.4</b> Plots, Files, Packages, Help, Viewer</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#r-как-калькулятор"><i class="fa fa-check"></i><b>1.7</b> R как калькулятор</a><ul>
<li class="chapter" data-level="1.7.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#арифметические-операции"><i class="fa fa-check"></i><b>1.7.1</b> Арифметические операции</a></li>
<li class="chapter" data-level="1.7.2" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#функции"><i class="fa fa-check"></i><b>1.7.2</b> Функции</a></li>
<li class="chapter" data-level="1.7.3" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#сравнение-и-логические-операции"><i class="fa fa-check"></i><b>1.7.3</b> Сравнение и логические операции</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#assignment-и-переменные"><i class="fa fa-check"></i><b>1.8</b> Assignment и переменные</a></li>
<li class="chapter" data-level="1.9" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#рабочая-директория.-projects"><i class="fa fa-check"></i><b>1.9</b> Рабочая директория. Projects</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="типы-данных.html"><a href="типы-данных.html"><i class="fa fa-check"></i><b>2</b> Типы данных</a><ul>
<li class="chapter" data-level="2.1" data-path="типы-данных.html"><a href="типы-данных.html#numeric"><i class="fa fa-check"></i><b>2.1</b> <code>numeric</code></a></li>
<li class="chapter" data-level="2.2" data-path="типы-данных.html"><a href="типы-данных.html#logical"><i class="fa fa-check"></i><b>2.2</b> <code>logical</code></a></li>
<li class="chapter" data-level="2.3" data-path="типы-данных.html"><a href="типы-данных.html#character"><i class="fa fa-check"></i><b>2.3</b> <code>character</code></a></li>
<li class="chapter" data-level="2.4" data-path="типы-данных.html"><a href="типы-данных.html#coercion-part-one"><i class="fa fa-check"></i><b>2.4</b> Coercion [part one]</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="структуры-данных.html"><a href="структуры-данных.html"><i class="fa fa-check"></i><b>3</b> Структуры данных</a><ul>
<li class="chapter" data-level="3.1" data-path="структуры-данных.html"><a href="структуры-данных.html#векторы"><i class="fa fa-check"></i><b>3.1</b> Векторы</a><ul>
<li class="chapter" data-level="3.1.1" data-path="структуры-данных.html"><a href="структуры-данных.html#coercion-part-two"><i class="fa fa-check"></i><b>3.1.1</b> Coercion [part two]</a></li>
<li class="chapter" data-level="3.1.2" data-path="структуры-данных.html"><a href="структуры-данных.html#генерация-числовых-последовательностей"><i class="fa fa-check"></i><b>3.1.2</b> Генерация числовых последовательностей</a></li>
<li class="chapter" data-level="3.1.3" data-path="структуры-данных.html"><a href="структуры-данных.html#операции-с-векторами"><i class="fa fa-check"></i><b>3.1.3</b> Операции с векторами</a></li>
<li class="chapter" data-level="3.1.4" data-path="структуры-данных.html"><a href="структуры-данных.html#recycling"><i class="fa fa-check"></i><b>3.1.4</b> Recycling</a></li>
<li class="chapter" data-level="3.1.5" data-path="структуры-данных.html"><a href="структуры-данных.html#индексация-векторов"><i class="fa fa-check"></i><b>3.1.5</b> Индексация векторов</a></li>
<li class="chapter" data-level="3.1.6" data-path="структуры-данных.html"><a href="структуры-данных.html#na-nan-null"><i class="fa fa-check"></i><b>3.1.6</b> NA, NaN, NULL</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="структуры-данных.html"><a href="структуры-данных.html#матрицы"><i class="fa fa-check"></i><b>3.2</b> Матрицы</a><ul>
<li class="chapter" data-level="3.2.1" data-path="структуры-данных.html"><a href="структуры-данных.html#индексация-матриц"><i class="fa fa-check"></i><b>3.2.1</b> Индексация матриц</a></li>
<li class="chapter" data-level="3.2.2" data-path="структуры-данных.html"><a href="структуры-данных.html#операции-в-матрицами"><i class="fa fa-check"></i><b>3.2.2</b> Операции в матрицами</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="структуры-данных.html"><a href="структуры-данных.html#списки"><i class="fa fa-check"></i><b>3.3</b> Списки</a></li>
<li class="chapter" data-level="3.4" data-path="структуры-данных.html"><a href="структуры-данных.html#датафреймы"><i class="fa fa-check"></i><b>3.4</b> Датафреймы</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="функции-1.html"><a href="функции-1.html"><i class="fa fa-check"></i><b>4</b> Функции</a><ul>
<li class="chapter" data-level="4.1" data-path="функции-1.html"><a href="функции-1.html#открытый-исходный-код"><i class="fa fa-check"></i><b>4.1</b> Открытый исходный код</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>5</b> Строки</a><ul>
<li class="chapter" data-level="5.1" data-path="strings.html"><a href="strings.html#регулярные-выражения"><i class="fa fa-check"></i><b>5.1</b> Регулярные выражения</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html"><i class="fa fa-check"></i><b>6</b> Работа с реальными данными</a><ul>
<li class="chapter" data-level="6.1" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#импорт-данных"><i class="fa fa-check"></i><b>6.2</b> Импорт данных</a><ul>
<li class="chapter" data-level="6.2.1" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#форматы-данных"><i class="fa fa-check"></i><b>6.2.1</b> Форматы данных</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#исследование-данных"><i class="fa fa-check"></i><b>6.3</b> Исследование данных</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="предобработка-данных-концепция-tidy-data.html"><a href="предобработка-данных-концепция-tidy-data.html"><i class="fa fa-check"></i><b>7</b> Предобработка данных. Концепция tidy data</a></li>
<li class="chapter" data-level="8" data-path="визуализация-данных.html"><a href="визуализация-данных.html"><i class="fa fa-check"></i><b>8</b> Визуализация данных</a></li>
<li class="part"><span><b>II Теория вероятностей и математическая статистика</b></span></li>
<li class="chapter" data-level="9" data-path="математический-ликбез.html"><a href="математический-ликбез.html"><i class="fa fa-check"></i><b>9</b> Математический ликбез</a><ul>
<li class="chapter" data-level="9.1" data-path="математический-ликбез.html"><a href="математический-ликбез.html#элементы-алгебры-логики"><i class="fa fa-check"></i><b>9.1</b> Элементы алгебры логики</a></li>
<li class="chapter" data-level="9.2" data-path="математический-ликбез.html"><a href="математический-ликбез.html#элементы-теории-множеств"><i class="fa fa-check"></i><b>9.2</b> Элементы теории множеств</a></li>
<li class="chapter" data-level="9.3" data-path="математический-ликбез.html"><a href="математический-ликбез.html#элементы-математического-анализа"><i class="fa fa-check"></i><b>9.3</b> Элементы математического анализа</a></li>
<li class="chapter" data-level="9.4" data-path="математический-ликбез.html"><a href="математический-ликбез.html#matrix"><i class="fa fa-check"></i><b>9.4</b> Элементы линейной алгебры</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="введение-в-статистику.html"><a href="введение-в-статистику.html"><i class="fa fa-check"></i><b>10</b> Введение в статистику</a></li>
<li class="chapter" data-level="11" data-path="случайный-эксперимент.html"><a href="случайный-эксперимент.html"><i class="fa fa-check"></i><b>11</b> Случайный эксперимент</a></li>
<li class="chapter" data-level="12" data-path="вероятность-и-случайные-величины.html"><a href="вероятность-и-случайные-величины.html"><i class="fa fa-check"></i><b>12</b> Вероятность и случайные величины</a></li>
<li class="chapter" data-level="13" data-path="оценивание-параметров-в-практике-статистического-анализа.html"><a href="оценивание-параметров-в-практике-статистического-анализа.html"><i class="fa fa-check"></i><b>13</b> Оценивание параметров в практике статистического анализа</a></li>
<li class="chapter" data-level="14" data-path="тестирование-статистических-гипотез.html"><a href="тестирование-статистических-гипотез.html"><i class="fa fa-check"></i><b>14</b> Тестирование статистических гипотез</a></li>
<li class="part"><span><b>III Анализ данных</b></span></li>
<li class="chapter" data-level="15" data-path="описательные-статистики.html"><a href="описательные-статистики.html"><i class="fa fa-check"></i><b>15</b> Описательные статистики</a><ul>
<li class="chapter" data-level="15.1" data-path="описательные-статистики.html"><a href="описательные-статистики.html#меры-центральной-тенденции"><i class="fa fa-check"></i><b>15.1</b> Меры центральной тенденции</a><ul>
<li class="chapter" data-level="15.1.1" data-path="описательные-статистики.html"><a href="описательные-статистики.html#мода"><i class="fa fa-check"></i><b>15.1.1</b> Мода</a></li>
<li class="chapter" data-level="15.1.2" data-path="описательные-статистики.html"><a href="описательные-статистики.html#медиана"><i class="fa fa-check"></i><b>15.1.2</b> Медиана</a></li>
<li class="chapter" data-level="15.1.3" data-path="описательные-статистики.html"><a href="описательные-статистики.html#среднее"><i class="fa fa-check"></i><b>15.1.3</b> Среднее</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="описательные-статистики.html"><a href="описательные-статистики.html#меры-разброса"><i class="fa fa-check"></i><b>15.2</b> Меры разброса</a><ul>
<li class="chapter" data-level="15.2.1" data-path="описательные-статистики.html"><a href="описательные-статистики.html#минимум-и-максимум"><i class="fa fa-check"></i><b>15.2.1</b> Минимум и максимум</a></li>
<li class="chapter" data-level="15.2.2" data-path="описательные-статистики.html"><a href="описательные-статистики.html#размах"><i class="fa fa-check"></i><b>15.2.2</b> Размах</a></li>
<li class="chapter" data-level="15.2.3" data-path="описательные-статистики.html"><a href="описательные-статистики.html#дисперсия"><i class="fa fa-check"></i><b>15.2.3</b> Дисперсия</a></li>
<li class="chapter" data-level="15.2.4" data-path="описательные-статистики.html"><a href="описательные-статистики.html#стандартное-отклонение"><i class="fa fa-check"></i><b>15.2.4</b> Стандартное отклонение</a></li>
<li class="chapter" data-level="15.2.5" data-path="описательные-статистики.html"><a href="описательные-статистики.html#стандартная-ошибка-среднего"><i class="fa fa-check"></i><b>15.2.5</b> Стандартная ошибка среднего</a></li>
<li class="chapter" data-level="15.2.6" data-path="описательные-статистики.html"><a href="описательные-статистики.html#квантили"><i class="fa fa-check"></i><b>15.2.6</b> Квантили</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="описательные-статистики.html"><a href="описательные-статистики.html#асимметрия"><i class="fa fa-check"></i><b>15.3</b> Асимметрия</a></li>
<li class="chapter" data-level="15.4" data-path="описательные-статистики.html"><a href="описательные-статистики.html#эксцесс"><i class="fa fa-check"></i><b>15.4</b> Эксцесс</a></li>
<li class="chapter" data-level="15.5" data-path="описательные-статистики.html"><a href="описательные-статистики.html#описательные-статистики-в-r"><i class="fa fa-check"></i><b>15.5</b> Описательные статистики в R</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html"><i class="fa fa-check"></i><b>16</b> Корреляционный анализ</a><ul>
<li class="chapter" data-level="16.1" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#ковариация"><i class="fa fa-check"></i><b>16.1</b> Ковариация</a></li>
<li class="chapter" data-level="16.2" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#корреляция"><i class="fa fa-check"></i><b>16.2</b> Корреляция</a><ul>
<li class="chapter" data-level="16.2.1" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#тестирование-статистической-значимости-коэффициента-корреляции"><i class="fa fa-check"></i><b>16.2.1</b> Тестирование статистической значимости коэффициента корреляции</a></li>
<li class="chapter" data-level="16.2.2" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#доверительный-интервал-для-коэффициента-корреляции"><i class="fa fa-check"></i><b>16.2.2</b> Доверительный интервал для коэффициента корреляции</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="общие-линейные-модели-простая-линейная-регрессия.html"><a href="общие-линейные-модели-простая-линейная-регрессия.html"><i class="fa fa-check"></i><b>17</b> Общие линейные модели. Простая линейная регрессия</a></li>
<li class="chapter" data-level="18" data-path="множественная-линейная-регрессия.html"><a href="множественная-линейная-регрессия.html"><i class="fa fa-check"></i><b>18</b> Множественная линейная регрессия</a></li>
<li class="chapter" data-level="19" data-path="дисперсионный-анализ.html"><a href="дисперсионный-анализ.html"><i class="fa fa-check"></i><b>19</b> Дисперсионный анализ</a></li>
<li class="chapter" data-level="20" data-path="ковариационный-анализ.html"><a href="ковариационный-анализ.html"><i class="fa fa-check"></i><b>20</b> Ковариационный анализ</a></li>
<li class="chapter" data-level="21" data-path="обобщенные-линейные-модели-логистическая-регрессия.html"><a href="обобщенные-линейные-модели-логистическая-регрессия.html"><i class="fa fa-check"></i><b>21</b> Обобщенные линейные модели. Логистическая регрессия</a></li>
<li class="chapter" data-level="22" data-path="пуассоновская-регрессия.html"><a href="пуассоновская-регрессия.html"><i class="fa fa-check"></i><b>22</b> Пуассоновская регрессия</a></li>
<li class="chapter" data-level="23" data-path="регуляризация-регрессии.html"><a href="регуляризация-регрессии.html"><i class="fa fa-check"></i><b>23</b> Регуляризация регрессии</a></li>
<li class="chapter" data-level="24" data-path="смешанные-линейные-модели.html"><a href="смешанные-линейные-модели.html"><i class="fa fa-check"></i><b>24</b> Смешанные линейные модели</a></li>
<li class="chapter" data-level="25" data-path="кластерный-анализ.html"><a href="кластерный-анализ.html"><i class="fa fa-check"></i><b>25</b> Кластерный анализ</a></li>
<li class="chapter" data-level="26" data-path="анализ-главных-компонент.html"><a href="анализ-главных-компонент.html"><i class="fa fa-check"></i><b>26</b> Анализ главных компонент</a></li>
<li class="chapter" data-level="27" data-path="эксплораторный-факторный-анализ.html"><a href="эксплораторный-факторный-анализ.html"><i class="fa fa-check"></i><b>27</b> Эксплораторный факторный анализ</a></li>
<li class="chapter" data-level="28" data-path="конфирматорный-факторный-анализ.html"><a href="конфирматорный-факторный-анализ.html"><i class="fa fa-check"></i><b>28</b> Конфирматорный факторный анализ</a></li>
<li class="chapter" data-level="29" data-path="что-дальше.html"><a href="что-дальше.html"><i class="fa fa-check"></i><b>29</b> Что дальше?</a></li>
<li class="appendix"><span><b>Приложения</b></span></li>
<li class="chapter" data-level="A" data-path="iron.html"><a href="iron.html"><i class="fa fa-check"></i><b>A</b> Данные и железо</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a><ul>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#касаемо-математики"><i class="fa fa-check"></i>Касаемо математики</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#относительно-статистики"><i class="fa fa-check"></i>Относительно статистики</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#about-r"><i class="fa fa-check"></i>About R</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#во-славу-андана"><i class="fa fa-check"></i>Во славу андана</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HSE UX LAB | Анализ данных + R: мир линейных моделей | Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="структуры-данных" class="section level1">
<h1><span class="header-section-number">3</span> Структуры данных</h1>
<p>С тем, какие существуют данные, мы разобрались. Теперь надо понять, как мы их можем организовать.</p>
<div id="векторы" class="section level2">
<h2><span class="header-section-number">3.1</span> Векторы</h2>
<p>Простейший способ организации данных — это вектор. Казалось бы, мы знаем, что вектор — это направленный отрезок. Безусловно, это так — в рамках Евклидовой геометрии, которую мы в давнем прошлом учили. Однако это не единственный способ смотреть на вещи. С точки зрения структур данных, <strong>вектор — это одномерный массив</strong>, а если по-русски, то <strong>набор элементов одного типа (например, чисел)</strong>.</p>
<p>Эти два представления, на самом деле, не противоречат друг другу. Геометрически, как мы сказали, вектор — это направленный отрезок. Он задаётся через координаты начала и конца. Если мы условимся всегда начинать вектор из начала координат — то есть будет считать равными все векторы, которые имеют одинаковую длину и одинаковое направление<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> — то мы сможем задавать вектор только через координаты его конца. В случае двумерного пространства вектор будет однозначно задаваться парой чисел <span class="math inline">\((x, y)\)</span>, в случае трёхмерного — тройкой чисел <span class="math inline">\((x,y,z)\)</span>, а в случае <span class="math inline">\(n\)</span>-мерного пространства — набором чисел <span class="math inline">\((x_1, x_2, x_3, \dots, x_n)\)</span>.</p>
<p>Чтобы создать вектор в R надо воспользоваться функцией <code>c()</code>. Она принимает неограниченное количесво аргументов, которые объединяет в вектор. В вектор можно объединить элементы <em>только одного типа</em>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="структуры-данных.html#cb1-1"></a>v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>)</span></code></pre></div>
<p>Сохраним получившийся числовой вектор в переменную <code>v</code>. Присваивание векторов ничем не отличается от присваивания чисел, во-первых, потому что <em>в R нет скаляров</em>, и все числа — это векторы типа <code>numeric</code> длиной 1, а во-вторых, потому что и число, и вектор, и другие структуры данных (и даже функции!) — всё это <em>объекты</em>. А assignment — не что иное, как присваивание имени некоторому объекту, и нет разницы, что мы называем — число, матрицу, список, датафрейм или функцию.</p>
<div id="coercion-part-two" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Coercion [part two]</h3>
<p>Взбунтуемся, и объеденим в один вектор разные типы данных:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="структуры-данных.html#cb2-1"></a>v0 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb2-2"><a href="структуры-данных.html#cb2-2"></a>v0</span></code></pre></div>
<pre><code>## [1] 1 2 1 0</code></pre>
<p>Бунт не удался — вектор всё равно был создан. Но что произошло?</p>
<center>
<img src="img/mem-coercion.jpg">
</center>
<p>С приведением типов мы уже сталкивались, когда пытались складывать логические константы. Аналогично R действовал и здесь:</p>
<ul>
<li>есть задача создать вектор</li>
<li>но на выход функции поступили данные различных типов</li>
<li>придётся сделать так, чтобы тип был всё-таки один</li>
<li><code>numeric</code> к <code>logical</code> однозначно привести сложно (что есть <code>2</code> — <code>TRUE</code> или <code>FALSE</code>?)</li>
<li><code>logical</code> к <code>numeric</code> приводится очень хорошо и красиво (<code>TRUE</code> — <code>1</code>, <code>FALSE</code> — <code>0</code>)</li>
<li>после приведения типов можно выполнить команду создания вектора.</li>
</ul>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>А всё-таки: что есть <code>2</code>? <code>TRUE</code> или <code>FALSE</code>? Выясните, воспользовавшись функциями <code>isTRUE()</code> и <code>isFALSE()</code>.</p>
</div>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>А будет ли работать (и как именно) ручное приведение <code>numeric</code> к <code>logical</code>? С помощью функции <code>as.logical()</code> приведите числа <code>0</code>, <code>1</code>, <code>2</code> и <code>-1</code> к логическому типу.</p>
</div>
<p>Сделаем вектор из полного салата — добавим сторовые значения:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="структуры-данных.html#cb4-1"></a>v0 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="st">&#39;text&#39;</span>, <span class="st">&#39;string&#39;</span>)</span>
<span id="cb4-2"><a href="структуры-данных.html#cb4-2"></a>v0</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;      &quot;2&quot;      &quot;TRUE&quot;   &quot;FALSE&quot;  &quot;text&quot;   &quot;string&quot;</code></pre>
<p>Наблюдаем, что все свелось к типу <code>character</code>, что вполне ожидаемо, так как <code>2</code> в <code>"2"</code> превращается однозначно, а вот в какое число (или логическую константу) превратить <code>"string"</code>, не очень понятно.</p>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Как отработает следующая конструкция?</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="структуры-данных.html#cb6-1"></a>v0 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">TRUE</span>), <span class="ot">FALSE</span>, <span class="st">&#39;text&#39;</span>, <span class="st">&#39;string&#39;</span>)</span></code></pre></div>
<p>И почему именно так?</p>
</div>
<p>Собственно, можно вывести иерархию приведения типов:</p>
<center>
<strong> logical &lt; integer &lt; numeric &lt; complex &lt; character </strong>
</center>
</div>
<div id="генерация-числовых-последовательностей" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Генерация числовых последовательностей</h3>
<p>Создавать руками вектора — это, конечно, радостно и приятно, но не очень юзабельно. На практике часто возникает потребность сгенерировать определенную числовую последовательность. Например, у вас есть опросниковые данные, из которых необходимо удалить персональные данные, но при этом сохранить возможность соотнести персональные данные и результаты анализа по каждому респонденту — вам нужно сгенерировать переменную ID. Вам поможет оператор <code>:</code>, который генерирует последовательность в заданных пределах с шагом 1:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="структуры-данных.html#cb7-1"></a><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="структуры-данных.html#cb9-1"></a><span class="dv">15</span><span class="op">:</span><span class="dv">0</span></span></code></pre></div>
<pre><code>##  [1] 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0</code></pre>
<p>Если вам нужна последовательно с другим шагом, например, 0.5, то подойдет функция <code>seq()</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="структуры-данных.html#cb11-1"></a><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">10</span>, <span class="dt">by =</span> <span class="fl">0.5</span>) <span class="co"># задаём шаг последовательности</span></span></code></pre></div>
<pre><code>##  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0
## [16]  8.5  9.0  9.5 10.0</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="структуры-данных.html#cb13-1"></a><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">-6</span>, <span class="fl">-1.5</span>) <span class="co"># или без указания названий аргументов</span></span></code></pre></div>
<pre><code>## [1]  0.0 -1.5 -3.0 -4.5 -6.0</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="структуры-данных.html#cb15-1"></a><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">5</span>, <span class="dt">to =</span> <span class="dv">30</span>, <span class="dt">length.out =</span> <span class="dv">20</span>) <span class="co"># задаём длину последовательности</span></span></code></pre></div>
<pre><code>##  [1]  5.000000  6.315789  7.631579  8.947368 10.263158 11.578947 12.894737
##  [8] 14.210526 15.526316 16.842105 18.157895 19.473684 20.789474 22.105263
## [15] 23.421053 24.736842 26.052632 27.368421 28.684211 30.000000</code></pre>
<p>Допустим, у вас есть данные (пусть выборка будет 15 человек), в которых каждые две строки относятся к одному респонденту, но к двум различным экспериментальным условиям (экспериментальному и контрольному). Тогда можно сделать такие переменные:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="структуры-данных.html#cb17-1"></a><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">15</span>, <span class="dt">each =</span> <span class="dv">2</span>) <span class="co"># для id</span></span></code></pre></div>
<pre><code>##  [1]  1  1  2  2  3  3  4  4  5  5  6  6  7  7  8  8  9  9 10 10 11 11 12 12 13
## [26] 13 14 14 15 15</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="структуры-данных.html#cb19-1"></a><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&#39;exp&#39;</span>, <span class="st">&#39;control&#39;</span>), <span class="dt">times =</span> <span class="dv">15</span>) <span class="co"># для обозначения условия</span></span></code></pre></div>
<pre><code>##  [1] &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;    
##  [8] &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot;
## [15] &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;    
## [22] &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot; &quot;exp&quot;     &quot;control&quot;
## [29] &quot;exp&quot;     &quot;control&quot;</code></pre>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Сгенерируйте последовательность от 106 до 124 с шагом 4, в которой каждый элемент будет повторяться подряд три раза.</p>
<pre><code>##  [1] 106 106 106 110 110 110 114 114 114 118 118 118 122 122 122</code></pre>
</div>
<p>Также можно сгенерировать случайную последовательность чисел (например, для того, чтобы использовать её при сабсете случайной подвыборки данных):</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="структуры-данных.html#cb22-1"></a><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">30</span>, <span class="dt">size =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1]  4 30 14 21 24  3  6  7 27 16 25 28 26 29 23</code></pre>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>По умолчанию функция <code>sample()</code> генерирует случайную последовательность с учетом того, что выпадение каждого числа равновероятно. Как изменить это условие?</p>
</div>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Сгенерируйте случайную последователность из 30 чисел от 1 до 10 при условии, что единица выпадает в два раза чаще, чем все остальные числа.</p>
<p>Чтобы результат получился такой же, как ниже, перед выполнением команды <code>sample(...)</code> выполните команду:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="структуры-данных.html#cb24-1"></a><span class="kw">set.seed</span>(<span class="dv">69</span>)</span></code></pre></div>
<pre><code>##  [1]  6  9  4 10  5 10  1  9  1  1 10  8  2  3  3  3  1  7  1  9  5  1  4  8  1
## [26]  3  4  7  1  8</code></pre>
</div>
</div>
<div id="операции-с-векторами" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Операции с векторами</h3>
<p>Операции, которые можно выполнять над векторами зависят от типа данных, которые содержатся в векторе. Чаще всего мы будем работать с числовыми векторами, поэтому разберем подробно именно их.</p>
<p>Пусть у нас будет два вектора:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="структуры-данных.html#cb26-1"></a><span class="kw">set.seed</span>(<span class="dv">42</span>) <span class="co"># задаём положение для датчика случайных чисел</span></span>
<span id="cb26-2"><a href="структуры-данных.html#cb26-2"></a>v1 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">20</span>)</span>
<span id="cb26-3"><a href="структуры-данных.html#cb26-3"></a>v2 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="op">-</span><span class="dv">50</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">20</span>)</span></code></pre></div>
<p>Над векторами можно выполнять арифметические операции:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="структуры-данных.html#cb27-1"></a>v1 <span class="op">+</span><span class="st"> </span>v2</span></code></pre></div>
<pre><code>##  [1]  56  56  -2  66 110 200 132   9  88 147  78 -27  74  66  -4 110 115  70 -14
## [20] 154</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="структуры-данных.html#cb29-1"></a>v1 <span class="op">-</span><span class="st"> </span>v2</span></code></pre></div>
<pre><code>##  [1]  42  74  52  82 -74   0 -38  39  54  31  -4  67 -22 -60  86 -56 -43 -60  82
## [20]  20</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="структуры-данных.html#cb31-1"></a>v1 <span class="op">*</span><span class="st"> </span>v2</span></code></pre></div>
<pre><code>##  [1]   343  -585  -675  -592  1656 10000  3995  -360  1207  5162  1517  -940
## [13]  1248   189 -1845  2241  2844   325 -1632  5829</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="структуры-данных.html#cb33-1"></a>v1 <span class="op">/</span><span class="st"> </span>v2</span></code></pre></div>
<pre><code>##  [1]  7.00000000 -7.22222222 -0.92592593 -9.25000000  0.19565217  1.00000000
##  [7]  0.55294118 -1.60000000  4.17647059  1.53448276  0.90243902 -0.42553191
## [13]  0.54166667  0.04761905 -0.91111111  0.32530120  0.45569620  0.07692308
## [19] -0.70833333  1.29850746</code></pre>
<p>Они выполняются поэлементно, то есть соответсвующие элементы двух векторов складываются (вычитаются, умножаются, делятся), и в результате получается новый вектор.</p>
<p>Кроме того, векторы можно поэлементно сравнивать:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="структуры-данных.html#cb35-1"></a>v1 <span class="op">&lt;</span><span class="st"> </span>v2</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE
## [13]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="структуры-данных.html#cb37-1"></a>v1 <span class="op">==</span><span class="st"> </span>v2</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="структуры-данных.html#cb39-1"></a>v2 <span class="op">&lt;=</span><span class="st"> </span>v1</span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE
## [13] FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE</code></pre>
<p>Также к вектору можно применять и функции:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="структуры-данных.html#cb41-1"></a><span class="kw">sin</span>(v1)</span></code></pre></div>
<pre><code>##  [1] -0.9537527  0.8268287 -0.1323518 -0.9851463 -0.7509872 -0.5063656
##  [7]  0.1235731 -0.9055784  0.9510547  0.8600694 -0.6435381  0.9129453
## [13]  0.7625585  0.1411200 -0.1586227  0.9563759 -0.9917789 -0.9589243
## [19]  0.5290827 -0.8218178</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="структуры-данных.html#cb43-1"></a><span class="kw">log</span>(v1)</span></code></pre></div>
<pre><code>##  [1] 3.891820 4.174387 3.218876 4.304065 2.890372 4.605170 3.850148 3.178054
##  [9] 4.262680 4.488636 3.610918 2.995732 3.258097 1.098612 3.713572 3.295837
## [17] 3.583519 1.609438 3.526361 4.465908</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="структуры-данных.html#cb45-1"></a><span class="kw">exp</span>(v2)</span></code></pre></div>
<pre><code>##  [1] 1.096633e+03 1.234098e-04 1.879529e-12 3.354626e-04 9.017628e+39
##  [6] 2.688117e+43 8.223013e+36 3.059023e-07 2.415495e+07 1.545539e+25
## [11] 6.398435e+17 3.873998e-21 7.016736e+20 2.293783e+27 2.862519e-20
## [16] 1.112864e+36 2.038281e+34 1.694889e+28 1.425164e-21 1.252363e+29</code></pre>
<p>Можно применять несколько функций подряд:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="структуры-данных.html#cb47-1"></a><span class="kw">log</span>(<span class="kw">abs</span>(v2))</span></code></pre></div>
<pre><code>##  [1] 1.945910 2.197225 3.295837 2.079442 4.521789 4.605170 4.442651 2.708050
##  [9] 2.833213 4.060443 3.713572 3.850148 3.871201 4.143135 3.806662 4.418841
## [17] 4.369448 4.174387 3.871201 4.204693</code></pre>
<p>Большинство арифметических функций выполняется поэлементно, однако существуют такие, которые поэлементно не могут быть выполнены, например сумма по вектору:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="структуры-данных.html#cb49-1"></a><span class="kw">sum</span>(v1)</span></code></pre></div>
<pre><code>## [1] 878</code></pre>
<p>Или функция, которая вычисляет длину вектора (в смысле количества элементов в нём):</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="структуры-данных.html#cb51-1"></a><span class="kw">length</span>(v2)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
</div>
<div id="recycling" class="section level3">
<h3><span class="header-section-number">3.1.4</span> Recycling</h3>
<p>Доныне мы складывали векторы одинаковой длины. С ними всё ясно — они складываются поэлементно. А что будет, если мы сложим векторы разной длины?</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="структуры-данных.html#cb53-1"></a>v3 &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span>, <span class="dt">times =</span> <span class="dv">10</span>); v3 <span class="co"># создаём векторы</span></span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="структуры-данных.html#cb55-1"></a>v4 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">2</span>); v4</span></code></pre></div>
<pre><code>## [1] 21  2</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="структуры-данных.html#cb57-1"></a>v5 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">3</span>); v5</span></code></pre></div>
<pre><code>## [1] 58 10 40</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="структуры-данных.html#cb59-1"></a><span class="kw">length</span>(v3) <span class="co"># проверяем длину</span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="структуры-данных.html#cb61-1"></a><span class="kw">length</span>(v4)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="структуры-данных.html#cb63-1"></a><span class="kw">length</span>(v5)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Итак, сумма:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="структуры-данных.html#cb65-1"></a>v3 <span class="op">+</span><span class="st"> </span>v4</span></code></pre></div>
<pre><code>##  [1] 22  3 22  3 22  3 22  3 22  3</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="структуры-данных.html#cb67-1"></a>v3 <span class="op">+</span><span class="st"> </span>v5</span></code></pre></div>
<pre><code>## Warning in v3 + v5: longer object length is not a multiple of shorter object
## length</code></pre>
<pre><code>##  [1] 59 11 41 59 11 41 59 11 41 59</code></pre>
<p>Внимательно посмотрим на результат. В первом случае мы складывали вектор из десяти элементов и вектор из двух элементов. Чтобы выполнирь эту операцию R выполняет <em>зацикливание (recycling)</em> более короткого из двух, чтобы каждый элемент большего по длине вектора получил в соответствии элементн меньшего. Так как десять кратно двум, то по сути было выполнена следующая команда:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="структуры-данных.html#cb70-1"></a>v3 <span class="op">+</span><span class="st"> </span><span class="kw">rep</span>(v4, </span>
<span id="cb70-2"><a href="структуры-данных.html#cb70-2"></a>         <span class="dt">times =</span> <span class="kw">length</span>(v3) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(v4))</span></code></pre></div>
<pre><code>##  [1] 22  3 22  3 22  3 22  3 22  3</code></pre>
<p>Во втором случае длина меньшего вектора не кратна длине большего, поэтому recycling происходит до тех пор, пока не будут покрыты все элемент большего вектора. Вектор из трех элементов укладывается на вектор из десяти элементов три раза — поэтому мы видим в результате три раза последовательность <code>59, 11, 41</code> — и остается ещё один десятый элемент, который суммируется в первым элементом меньшего вектора — поэтому последний элемент в векторе результата <code>59</code>.</p>
</div>
<div id="индексация-векторов" class="section level3">
<h3><span class="header-section-number">3.1.5</span> Индексация векторов</h3>
<p>В практике мы постоянно сталкиваемся в необходимость анализировать не все данные в векторе, а их часть. Поэтому встаёт вопрос о том, как эту часть извлечь?</p>
<p>Извлечение части данных из вектора называется <strong>индексацией</strong>. Это делается так:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="структуры-данных.html#cb72-1"></a>v1[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>] <span class="co"># первые десять элементов вектора</span></span></code></pre></div>
<pre><code>##  [1]  49  65  25  74  18 100  47  24  71  89</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="структуры-данных.html#cb74-1"></a>v1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>)] <span class="co"># 1-й, 3-й, 5-й и 7-й элементы вектора</span></span></code></pre></div>
<pre><code>## [1] 49 25 18 47</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="структуры-данных.html#cb76-1"></a>v1[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>, <span class="dv">5</span>)] <span class="co"># случайная подвыборка пяти элементов</span></span></code></pre></div>
<pre><code>## [1] 18 49 36 47 74</code></pre>
<p>Логика проста — чтобы взять часть вектора, нам нужен вектор индексов тех элементов, которые мы хотим вытащить. Его мы поместим в квадратные скобки — и будет нам счастье. Вектор индектов можно получить любыми способами:</p>
<ul>
<li>сгенерировать последовательноть (как в первом варианте),</li>
<li>задать индексы вручную, не забыв при этом обернуть их в фнукцию <code>c()</code>, чтобы указать, что это вектор, (как во втором варианте),</li>
<li>воспользоваться функцией, которая возвращает вектор.</li>
</ul>
<p>Полезно также является индексация через отрицательные индексы:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="структуры-данных.html#cb78-1"></a>v2</span></code></pre></div>
<pre><code>##  [1]   7  -9 -27  -8  92 100  85 -15  17  58  41 -47  48  63 -45  83  79  65 -48
## [20]  67</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="структуры-данных.html#cb80-1"></a>v2[<span class="op">-</span><span class="dv">1</span>] <span class="co"># все элементы, кроме первого</span></span></code></pre></div>
<pre><code>##  [1]  -9 -27  -8  92 100  85 -15  17  58  41 -47  48  63 -45  83  79  65 -48  67</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="структуры-данных.html#cb82-1"></a>v2[<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)] <span class="co"># все элементы, кроме первых пяти</span></span></code></pre></div>
<pre><code>##  [1] 100  85 -15  17  58  41 -47  48  63 -45  83  79  65 -48  67</code></pre>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Запишите в вектор результат следующей команды:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="структуры-данных.html#cb84-1"></a><span class="kw">read.csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/angelgardt/hseuxlab-wlm2021/master/book/wlm2021-book/data/indexing_vectors.csv&#39;</span>)[[<span class="st">&#39;x&#39;</span>]]</span></code></pre></div>
<p>Задайте положение датчик случайный чисел:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="структуры-данных.html#cb85-1"></a><span class="kw">set.seed</span>(<span class="dv">123</span>)</span></code></pre></div>
<p>Выберите из получившего вектора все значения, <em>кроме тех</em>, которые попадут в случайную подвыборку из 50 наблюдений. Вычислите сумму элементов получившегося вектора.</p>
<p><em>Подсказка. Функции <code>sample()</code> необходимы границы интервала, из которого она генерирует случайную подвыборку. Одна из границ интервала — длина вектора, с которым вы работаете.</em></p>
<div class="autocheck">
<input class="taskinput" id="input1" type="text">
<input class="taskcheck" type="button" value="Проверить" onClick="check1()">
<div id="taskans1" class="taskans" hidden="">

</div>
</div>
</div>
<script type="text/javascript">
var input1 = document.getElementById("input1")
var taskans1 = document.getElementById("taskans1")

function check1() {
  if (input1.value == '149885') {
    taskans1.hidden = false;
    taskans1.innerHTML = 'Верно!';
    taskans1.style = "color:  #00aa4a";
  } else
  {
    taskans1.hidden = false;
    taskans1.innerHTML = 'У меня другой ответ…';
    taskans1.style = "color:  #b73239";
  }
}
</script>
<p>Особого внимания заслуживает <strong>индексация логическими векторами</strong>. Например, мы хотим отобрать все элементы вектора, которые больше некоторого числа. Как это сделать?</p>
<p>Нам нужен вектор, которым мы будем индексировать исходный вектор. Как его получить? Известно, что при сравнении векторов между собой получается логический вектор. Но ведь число — это тоже вектор, просто единичной длины? Значит, если мы будем сравнивать вектор с числом, произойдёт recycling, в результате которого каждый элемент вектора будет сравнен с этим числом. То есть:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="структуры-данных.html#cb86-1"></a>v1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">40</span></span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE
## [13] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE</code></pre>
<p>Отлично! Вектор есть. Можно ли им проидексировать наш исходный вектор <code>v1</code>? Можно! Аналогично тому, как мы это уже делали.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="структуры-данных.html#cb88-1"></a>v1[v1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">40</span>]</span></code></pre></div>
<pre><code>## [1]  49  65  74 100  47  71  89  41  87</code></pre>
<p>Конструкция, возможно, выглядит немного странновато — но работает!</p>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Возмите вектор <code>v1</code>, с которым мы только что работали и с опорой на имеющийся в предыдущем чанке код, вытащите из вектора элементы, который <em>не больше</em> среднего значения по вектору.</p>
<p>Мы ещё не изучали описательные статистики, но со средним арифметическим вроде все знакомы? Вычисляется оно с помощью функции <code>mean()</code>.</p>
<pre><code>##  [1] 25 18 24 37 20 26  3 41 27 36  5 34</code></pre>
</div>
</div>
<div id="na-nan-null" class="section level3">
<h3><span class="header-section-number">3.1.6</span> NA, NaN, NULL</h3>
<p>Взбунтуемся ещё раз и посмотрим, что получится, если мы будем вытаскивать из вектора элементы, используя индексы, которые выходят за границы длины вектора. Например, у нас есть вектор <code>v2</code>, длина которого</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="структуры-данных.html#cb91-1"></a><span class="kw">length</span>(v2)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Попробуем сделать так:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="структуры-данных.html#cb93-1"></a>v2[<span class="dv">15</span><span class="op">:</span><span class="dv">25</span>]</span></code></pre></div>
<pre><code>##  [1] -45  83  79  65 -48  67  NA  NA  NA  NA  NA</code></pre>
<p>Мы получили нечто, с чем ранее не сталкивались. <code>NA</code> (от <em>not available</em>) обозначает значение, которое недоступно. Как правило, в реальных данных они появляются при каких-либо ошибках записи данных. Впрочем, не всегда. Можно придумать и такой дизайн исследования, когда пропуски также будут информативны и могут анализировться. В нашем случае мы обратились к элементам, которых нет в нашем векторе, поэтому R ничего более не смог сделать, как вернуть нам свидетельство того, что такие элементы он из вектора достать не смог.</p>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>К какому типу даных относится константа <code>NA</code>?</p>
</div>
<p><code>NA</code> ведёт себя весьма специфично. Например, если мы попробуем посчитать сумму по получившемуся вектору, то результат будет следующим:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="структуры-данных.html#cb95-1"></a><span class="kw">sum</span>(v2[<span class="dv">15</span><span class="op">:</span><span class="dv">25</span>])</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Аналогичная ситуация возникнет, если мы будем вычислять среднее:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="структуры-данных.html#cb97-1"></a><span class="kw">mean</span>(v2[<span class="dv">15</span><span class="op">:</span><span class="dv">25</span>])</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Такое поведение функций может поначалу напрягать, однако оказывается очень полезным при работе с реальными данными.</p>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>И всё же функция <code>sum()</code> не так проста, и умеет бороться с <code>NA</code>. Как нужно изменить команду, чтобы сумма была посчитана?</p>
</div>
<p>Попробуем вычислить логарифм по вектору <code>v2</code>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="структуры-данных.html#cb99-1"></a><span class="kw">log</span>(v2)</span></code></pre></div>
<pre><code>## Warning in log(v2): NaNs produced</code></pre>
<pre><code>##  [1] 1.945910      NaN      NaN      NaN 4.521789 4.605170 4.442651      NaN
##  [9] 2.833213 4.060443 3.713572      NaN 3.871201 4.143135      NaN 4.418841
## [17] 4.369448 4.174387      NaN 4.204693</code></pre>
<p>Опять всё не слава богу. Теперь у нас <code>NaN</code>. Это почти как <code>NA</code>, но не совсем. <code>NaN</code> обозначает не-число (<em>not a number</em>). То есть, это не пропущенное значение, оно существует, но R его не может вычислить. Если мы сравним два вектора,</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="структуры-данных.html#cb102-1"></a>v2; <span class="kw">log</span>(v2)</span></code></pre></div>
<pre><code>##  [1]   7  -9 -27  -8  92 100  85 -15  17  58  41 -47  48  63 -45  83  79  65 -48
## [20]  67</code></pre>
<pre><code>## Warning in log(v2): NaNs produced</code></pre>
<pre><code>##  [1] 1.945910      NaN      NaN      NaN 4.521789 4.605170 4.442651      NaN
##  [9] 2.833213 4.060443 3.713572      NaN 3.871201 4.143135      NaN 4.418841
## [17] 4.369448 4.174387      NaN 4.204693</code></pre>
<p>то обнаружим, что <code>NaN</code> появляется там, где мы пытаемся вычислить логарим отрицательного числа. А, как мы помним, функция логарифма определена только на положительно полуоси <span class="math inline">\(x\)</span>. Вот и получается, что логарифм отрицательного аргумента — это какая-то неведомая сущность, то точно не-число.</p>
<p>В функциях <code>NaN</code> ведёт себя аналогично <code>NA</code>:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="структуры-данных.html#cb106-1"></a><span class="kw">sum</span>(<span class="kw">log</span>(v2))</span></code></pre></div>
<pre><code>## Warning in log(v2): NaNs produced</code></pre>
<pre><code>## [1] NaN</code></pre>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>К какому типу даных относится константа <code>NaN</code>?</p>
</div>
<p>Мы поговорили о двух важный константах используемых в R. Есть ещё одна, и имя её <code>NULL</code>. Это имя обозначает «ничего», то есть, что объект пуст.</p>
<p>Например, возьмем вектор <code>v</code>, который мы создавали в самом начале, и положим в него <code>NULL</code>:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="структуры-данных.html#cb109-1"></a>v &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb109-2"><a href="структуры-данных.html#cb109-2"></a>v</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>Теперь в этом векторе ничего не лежит.</p>
<p><code>NULL</code> может использоваться при задании аргументов функций или как результат работы функций, если возвращается пустой объект.</p>
</div>
</div>
<div id="матрицы" class="section level2">
<h2><span class="header-section-number">3.2</span> Матрицы</h2>
<p>Говоря о векторах, мы обозначили, что вектор — это одномерный массив. А раз есть одномерные массивы, значит бывают какие-то ещё? Да. Сгенерируем некоторый вектор:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="структуры-данных.html#cb111-1"></a>v6 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">12</span>); v6</span></code></pre></div>
<pre><code>##  [1] 53 27 96 38 89 34 93 69 72 76 63 13</code></pre>
<p>и попробуем его «сложить» в «таблицу» так, чтобы в каждой строке было по три числа:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="структуры-данных.html#cb113-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(v6, <span class="dt">ncol =</span> <span class="dv">3</span>); m1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   53   89   72
## [2,]   27   34   76
## [3,]   96   93   63
## [4,]   38   69   13</code></pre>
<p>Так как мы «складываем друг на друга» части одномерного массива, у нашего нового массива возникает новое измерение — если вектор был только одной строкой<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, то теперь в нашем массиве есть и строки, и столбцы. <strong>Двумерный массив назвается матрицей</strong>.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="структуры-данных.html#cb115-1"></a><span class="kw">class</span>(m1)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>И поэтому для его создания мы использовали функцию <code>matrix()</code>. В качестве основных аргументов она хочет видеть вектор, который мы будет «упаковывать» в матрицу, а также количество строк или столбцов новой матрицы.</p>
<div id="индексация-матриц" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Индексация матриц</h3>
<p>От того, что мы свернули вектор в матрицу, он не перестал быть вектором. [Шок!] То есть матрица по сути всё ещё тот же самый вектор, поэтому индексировать её можно точно так же, как и вектор:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="структуры-данных.html#cb117-1"></a>v6[<span class="dv">1</span>]; m1[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 53</code></pre>
<pre><code>## [1] 53</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="структуры-данных.html#cb120-1"></a>v6[<span class="dv">4</span>]; m1[<span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1] 38</code></pre>
<pre><code>## [1] 38</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="структуры-данных.html#cb123-1"></a>v6[<span class="dv">11</span>]; m1[<span class="dv">11</span>]</span></code></pre></div>
<pre><code>## [1] 63</code></pre>
<pre><code>## [1] 63</code></pre>
<p>Однако поскольку матрица — это всё же матрица, она отличается от вектора тем, что у неё есть дополнительный атрибут <code>dim</code>, который отображает её размерность:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="структуры-данных.html#cb126-1"></a><span class="kw">dim</span>(m1)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<p>В данном случае наблюдаем, что размерность матрицы <span class="math inline">\(4 × 3\)</span>, и это справедливо, ведь именно такую матрицу мы и создавали. А раз у нас имеется указание на количество строк и столбцов в матрице, то мы можем вытащить элемент(ы) как раз по его позиции:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="структуры-данных.html#cb128-1"></a>m1[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># вытаскиваем элемент из первой строки и второго столбца</span></span></code></pre></div>
<pre><code>## [1] 89</code></pre>
<p>Те же квадратные скобки, только указываем мы теперь две «координаты» — сначала строки, затем столбцы. Как не запутаться? Аналогия с координатами не случайна: строки — горизонтальны, первая координата на координата на координатной плоскости (<span class="math inline">\(x\)</span>) тоже задаёт положение точки на горизонтальной оси; столбцы — вертикальны, вторая координата (<span class="math inline">\(y\)</span>) задает положение точки на вертикальной оси.</p>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>Какой результат вернет команда <code>dim(v6)</code>? Почему именно такой?</p>
</div>
<p>Также мы можем вытащить не только отдельный элемент, но и какую-то часть матрицы. Всё работает аналогично векторам:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="структуры-данных.html#cb130-1"></a>m1[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   89   72
## [2,]   34   76
## [3,]   93   63</code></pre>
<p>Если мы выползем за границы индексации, R начнёт ругаться:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="структуры-данных.html#cb132-1"></a>m1[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## Error in m1[1:3, 2:4]: subscript out of bounds</code></pre>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>На практике нам часто надо вытащить отдельный столбец (или несколько столбцов), содержащих все строки. Как это можно сделать в R?</p>
<p>А если нам нужны несколько строк, содержащих все столбцы?</p>
</div>
</div>
<div id="операции-в-матрицами" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Операции в матрицами</h3>
<p><a href="математический-ликбез.html#matrix">Как вы знаете</a>, с матрицами можно делать много всякого разного.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="структуры-данных.html#cb134-1"></a><span class="co"># наделаем матриц для развлечения</span></span>
<span id="cb134-2"><a href="структуры-данных.html#cb134-2"></a>m2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">12</span>), <span class="dt">nrow =</span> <span class="dv">4</span>); m2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   82   38   47
## [2,]   97   21   90
## [3,]   91   79   60
## [4,]   25   41   16</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="структуры-данных.html#cb136-1"></a>m3 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">12</span>), <span class="dt">ncol =</span> <span class="dv">2</span>); m3</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   94   31
## [2,]    6   81
## [3,]   72   50
## [4,]   86   34
## [5,]   97    4
## [6,]   39   13</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="структуры-данных.html#cb138-1"></a>m4 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">9</span>), <span class="dt">nrow =</span> <span class="dv">3</span>); m4</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   69   22   99
## [2,]   25   89   87
## [3,]   52   32   35</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="структуры-данных.html#cb140-1"></a>m5 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">9</span>), <span class="dt">nrow =</span> <span class="dv">3</span>); m5</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   40   31   14
## [2,]   30   99   93
## [3,]   12   64   71</code></pre>
<p>Матрицы можно складывать<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> (поэлементно):</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="структуры-данных.html#cb142-1"></a>m1 <span class="op">+</span><span class="st"> </span>m2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]  135  127  119
## [2,]  124   55  166
## [3,]  187  172  123
## [4,]   63  110   29</code></pre>
<p>Но только те, которые имеют одинаковый размер:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="структуры-данных.html#cb144-1"></a>m1 <span class="op">+</span><span class="st"> </span>m4</span></code></pre></div>
<pre><code>## Error in m1 + m4: non-conformable arrays</code></pre>
<p>Матрицы можно умножать<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> (поэлементно):</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="структуры-данных.html#cb146-1"></a>m1 <span class="op">*</span><span class="st"> </span>m2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] 4346 3382 3384
## [2,] 2619  714 6840
## [3,] 8736 7347 3780
## [4,]  950 2829  208</code></pre>
<p>Но только те, которые имеют одинаковый размер:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="структуры-данных.html#cb148-1"></a>m1 <span class="op">*</span><span class="st"> </span>m4</span></code></pre></div>
<pre><code>## Error in m1 * m4: non-conformable arrays</code></pre>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>Что будет, если мы попробуем умножить матрицу на число?</p>
<p><em>Напоминание: матрица — это вектор.</em></p>
</div>
<img class="taskimg" src="img/question.png">
<div class="task">
<p>Что будет, если мы попробуем посчитать сумму по матрице?</p>
<p><em>Напоминание: матрица — это всё ещё вектор.</em></p>
</div>
<p>Но матрицы можно перемножать ещё и матрично. Тогда требуется соответствие вутренних размерностей матриц:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="структуры-данных.html#cb150-1"></a><span class="kw">dim</span>(m1); <span class="kw">dim</span>(m2)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<pre><code>## [1] 4 3</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="структуры-данных.html#cb153-1"></a>m1 <span class="op">%*%</span><span class="st"> </span>m2</span></code></pre></div>
<pre><code>## Error in m1 %*% m2: non-conformable arguments</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="структуры-данных.html#cb155-1"></a><span class="kw">dim</span>(m1); <span class="kw">dim</span>(m4)</span></code></pre></div>
<pre><code>## [1] 4 3</code></pre>
<pre><code>## [1] 3 3</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="структуры-данных.html#cb158-1"></a>m1 <span class="op">%*%</span><span class="st"> </span>m4</span></code></pre></div>
<pre><code>##       [,1]  [,2]  [,3]
## [1,]  9626 11391 15510
## [2,]  6665  6052  8291
## [3,] 12225 12405 19800
## [4,]  5023  7393 10220</code></pre>
<p>Помним, что матричное умножение <em>некуммутативно</em>:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="структуры-данных.html#cb160-1"></a>m4 <span class="op">%*%</span><span class="st"> </span>m5</span></code></pre></div>
<pre><code>##      [,1]  [,2]  [,3]
## [1,] 4608 10653 10041
## [2,] 4714 15154 14804
## [3,] 3460  7020  6189</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="структуры-данных.html#cb162-1"></a>m5 <span class="op">%*%</span><span class="st"> </span>m4</span></code></pre></div>
<pre><code>##      [,1]  [,2]  [,3]
## [1,] 4263  4087  7147
## [2,] 9381 12447 14838
## [3,] 6120  8232  9241</code></pre>
<p>Можно вычислить <a href="#det">детерминант</a> матрицы:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="структуры-данных.html#cb164-1"></a><span class="kw">det</span>(m4)</span></code></pre></div>
<pre><code>## [1] -275855</code></pre>
<p>И найти <a href="#inv">обратную матрицу</a>:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="структуры-данных.html#cb166-1"></a><span class="kw">solve</span>(m4)</span></code></pre></div>
<pre><code>##              [,1]         [,2]        [,3]
## [1,] -0.001199906 -0.008692973  0.02500227
## [2,] -0.013227964  0.009907379  0.01278933
## [3,]  0.013876856  0.003857099 -0.02026789</code></pre>
<p>А таке вычислить <a href="#trace">след матрицы</a>:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="структуры-данных.html#cb168-1"></a><span class="kw">sum</span>(<span class="kw">diag</span>(m4)) <span class="co"># специальной функции не придумали</span></span></code></pre></div>
<pre><code>## [1] 193</code></pre>
</div>
</div>
<div id="списки" class="section level2">
<h2><span class="header-section-number">3.3</span> Списки</h2>
</div>
<div id="датафреймы" class="section level2">
<h2><span class="header-section-number">3.4</span> Датафреймы</h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Такие векторы называются <em>свободными</em>.<a href="структуры-данных.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Или столбцом, что в данном случае не важно.<a href="структуры-данных.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>А если можно складывать, соответственно, можно и вычитать.<a href="структуры-данных.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>А если можно умножать, соответственно, можно и делить.<a href="структуры-данных.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="типы-данных.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="функции-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["wlm2021-book.pdf", "wlm2021-book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
