<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Строки | HSE UX LAB | Анализ данных + R: мир линейных моделей | Book</title>
  <meta name="description" content="Книга написана для слушателей курса по анализу данных от HSE UX LAB" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Строки | HSE UX LAB | Анализ данных + R: мир линейных моделей | Book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Книга написана для слушателей курса по анализу данных от HSE UX LAB" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Строки | HSE UX LAB | Анализ данных + R: мир линейных моделей | Book" />
  
  <meta name="twitter:description" content="Книга написана для слушателей курса по анализу данных от HSE UX LAB" />
  

<meta name="author" content="А. Ангельгардт" />


<meta name="date" content="2021-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functions.html"/>
<link rel="next" href="работа-с-реальными-данными.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="">HSE UX LAB | WLM 2021</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#благодарности"><i class="fa fa-check"></i>Благодарности</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#условные-обозначения"><i class="fa fa-check"></i>Условные обозначения</a></li>
</ul></li>
<li class="part"><span><b>I R programming</b></span></li>
<li class="chapter" data-level="1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html"><i class="fa fa-check"></i><b>1</b> Знакомство с R и RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#что-это-и-откуда"><i class="fa fa-check"></i><b>1.1</b> Что это и откуда?</a></li>
<li class="chapter" data-level="1.2" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#whyr"><i class="fa fa-check"></i><b>1.2</b> Почему R?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#а-он-лучше-питона"><i class="fa fa-check"></i><b>1.2.1</b> А он лучше Питона?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#установка-r-и-rstudio"><i class="fa fa-check"></i><b>1.3</b> Установка R и RStudio</a><ul>
<li class="chapter" data-level="1.3.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#а-зачем-обе-штуки-ставить"><i class="fa fa-check"></i><b>1.3.1</b> А зачем обе штуки ставить?</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#где-спросить-вопрос-или-искать-ответ"><i class="fa fa-check"></i><b>1.4</b> Где спросить вопрос или искать ответ?</a></li>
<li class="chapter" data-level="1.5" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#интерфейс-r"><i class="fa fa-check"></i><b>1.5</b> Интерфейс R</a></li>
<li class="chapter" data-level="1.6" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#интерфейс-rstudio"><i class="fa fa-check"></i><b>1.6</b> Интерфейс RStudio</a><ul>
<li class="chapter" data-level="1.6.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#console"><i class="fa fa-check"></i><b>1.6.1</b> Console</a></li>
<li class="chapter" data-level="1.6.2" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#code-editor"><i class="fa fa-check"></i><b>1.6.2</b> Code Editor</a></li>
<li class="chapter" data-level="1.6.3" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#environment-workspace-и-history"><i class="fa fa-check"></i><b>1.6.3</b> Environment (Workspace) и History</a></li>
<li class="chapter" data-level="1.6.4" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#plots-files-packages-help-viewer"><i class="fa fa-check"></i><b>1.6.4</b> Plots, Files, Packages, Help, Viewer</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#r-как-калькулятор"><i class="fa fa-check"></i><b>1.7</b> R как калькулятор</a><ul>
<li class="chapter" data-level="1.7.1" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#арифметические-операции"><i class="fa fa-check"></i><b>1.7.1</b> Арифметические операции</a></li>
<li class="chapter" data-level="1.7.2" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#funcs"><i class="fa fa-check"></i><b>1.7.2</b> Функции</a></li>
<li class="chapter" data-level="1.7.3" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#сравнение-и-логические-операции"><i class="fa fa-check"></i><b>1.7.3</b> Сравнение и логические операции</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#assignment-и-переменные"><i class="fa fa-check"></i><b>1.8</b> Assignment и переменные</a></li>
<li class="chapter" data-level="1.9" data-path="знакомство-с-r-и-rstudio.html"><a href="знакомство-с-r-и-rstudio.html#рабочая-директория.-projects"><i class="fa fa-check"></i><b>1.9</b> Рабочая директория. Projects</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="типы-данных.html"><a href="типы-данных.html"><i class="fa fa-check"></i><b>2</b> Типы данных</a><ul>
<li class="chapter" data-level="2.1" data-path="типы-данных.html"><a href="типы-данных.html#numeric"><i class="fa fa-check"></i><b>2.1</b> <code>numeric</code></a></li>
<li class="chapter" data-level="2.2" data-path="типы-данных.html"><a href="типы-данных.html#logical"><i class="fa fa-check"></i><b>2.2</b> <code>logical</code></a></li>
<li class="chapter" data-level="2.3" data-path="типы-данных.html"><a href="типы-данных.html#character"><i class="fa fa-check"></i><b>2.3</b> <code>character</code></a></li>
<li class="chapter" data-level="2.4" data-path="типы-данных.html"><a href="типы-данных.html#coercion-part-one"><i class="fa fa-check"></i><b>2.4</b> Coercion [part one]</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="структуры-данных.html"><a href="структуры-данных.html"><i class="fa fa-check"></i><b>3</b> Структуры данных</a><ul>
<li class="chapter" data-level="3.1" data-path="структуры-данных.html"><a href="структуры-данных.html#векторы"><i class="fa fa-check"></i><b>3.1</b> Векторы</a><ul>
<li class="chapter" data-level="3.1.1" data-path="структуры-данных.html"><a href="структуры-данных.html#coercion-part-two"><i class="fa fa-check"></i><b>3.1.1</b> Coercion [part two]</a></li>
<li class="chapter" data-level="3.1.2" data-path="структуры-данных.html"><a href="структуры-данных.html#генерация-числовых-последовательностей"><i class="fa fa-check"></i><b>3.1.2</b> Генерация числовых последовательностей</a></li>
<li class="chapter" data-level="3.1.3" data-path="структуры-данных.html"><a href="структуры-данных.html#операции-с-векторами"><i class="fa fa-check"></i><b>3.1.3</b> Операции с векторами</a></li>
<li class="chapter" data-level="3.1.4" data-path="структуры-данных.html"><a href="структуры-данных.html#recycling"><i class="fa fa-check"></i><b>3.1.4</b> Recycling</a></li>
<li class="chapter" data-level="3.1.5" data-path="структуры-данных.html"><a href="структуры-данных.html#индексация-векторов"><i class="fa fa-check"></i><b>3.1.5</b> Индексация векторов</a></li>
<li class="chapter" data-level="3.1.6" data-path="структуры-данных.html"><a href="структуры-данных.html#na-nan-null"><i class="fa fa-check"></i><b>3.1.6</b> NA, NaN, NULL</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="структуры-данных.html"><a href="структуры-данных.html#матрицы"><i class="fa fa-check"></i><b>3.2</b> Матрицы</a><ul>
<li class="chapter" data-level="3.2.1" data-path="структуры-данных.html"><a href="структуры-данных.html#индексация-матриц"><i class="fa fa-check"></i><b>3.2.1</b> Индексация матриц</a></li>
<li class="chapter" data-level="3.2.2" data-path="структуры-данных.html"><a href="структуры-данных.html#операции-в-матрицами"><i class="fa fa-check"></i><b>3.2.2</b> Операции в матрицами</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="структуры-данных.html"><a href="структуры-данных.html#списки"><i class="fa fa-check"></i><b>3.3</b> Списки</a><ul>
<li class="chapter" data-level="3.3.1" data-path="структуры-данных.html"><a href="структуры-данных.html#индексация-списков"><i class="fa fa-check"></i><b>3.3.1</b> Индексация списков</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="структуры-данных.html"><a href="структуры-данных.html#датафреймы"><i class="fa fa-check"></i><b>3.4</b> Датафреймы</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Функции</a><ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#открытый-исходный-код"><i class="fa fa-check"></i><b>4.1</b> Открытый исходный код</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>5</b> Строки</a><ul>
<li class="chapter" data-level="5.1" data-path="strings.html"><a href="strings.html#установка-дополнительных-пакетов"><i class="fa fa-check"></i><b>5.1</b> Установка дополнительных пакетов</a></li>
<li class="chapter" data-level="5.2" data-path="strings.html"><a href="strings.html#создание-строк"><i class="fa fa-check"></i><b>5.2</b> Создание строк</a></li>
<li class="chapter" data-level="5.3" data-path="strings.html"><a href="strings.html#конкатенация-строк"><i class="fa fa-check"></i><b>5.3</b> Конкатенация строк</a></li>
<li class="chapter" data-level="5.4" data-path="strings.html"><a href="strings.html#разделение-строк"><i class="fa fa-check"></i><b>5.4</b> Разделение строк</a></li>
<li class="chapter" data-level="5.5" data-path="strings.html"><a href="strings.html#сортировка-строк"><i class="fa fa-check"></i><b>5.5</b> Сортировка строк</a></li>
<li class="chapter" data-level="5.6" data-path="strings.html"><a href="strings.html#изменение-регистра"><i class="fa fa-check"></i><b>5.6</b> Изменение регистра</a></li>
<li class="chapter" data-level="5.7" data-path="strings.html"><a href="strings.html#поиск-подстроки"><i class="fa fa-check"></i><b>5.7</b> Поиск подстроки</a></li>
<li class="chapter" data-level="5.8" data-path="strings.html"><a href="strings.html#изменение-строк"><i class="fa fa-check"></i><b>5.8</b> Изменение строк</a><ul>
<li class="chapter" data-level="5.8.1" data-path="strings.html"><a href="strings.html#выделение-подстроки"><i class="fa fa-check"></i><b>5.8.1</b> Выделение подстроки</a></li>
<li class="chapter" data-level="5.8.2" data-path="strings.html"><a href="strings.html#замена-подстроки"><i class="fa fa-check"></i><b>5.8.2</b> Замена подстроки</a></li>
<li class="chapter" data-level="5.8.3" data-path="strings.html"><a href="strings.html#удаление-подстроки"><i class="fa fa-check"></i><b>5.8.3</b> Удаление подстроки</a></li>
<li class="chapter" data-level="5.8.4" data-path="strings.html"><a href="strings.html#транслитерация-строк"><i class="fa fa-check"></i><b>5.8.4</b> Транслитерация строк</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="strings.html"><a href="strings.html#регулярные-выражения"><i class="fa fa-check"></i><b>5.9</b> Регулярные выражения</a><ul>
<li class="chapter" data-level="5.9.1" data-path="strings.html"><a href="strings.html#метасимволы"><i class="fa fa-check"></i><b>5.9.1</b> Метасимволы</a></li>
<li class="chapter" data-level="5.9.2" data-path="strings.html"><a href="strings.html#классы-знаков"><i class="fa fa-check"></i><b>5.9.2</b> Классы знаков</a></li>
<li class="chapter" data-level="5.9.3" data-path="strings.html"><a href="strings.html#quant"><i class="fa fa-check"></i><b>5.9.3</b> Квантификация</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html"><i class="fa fa-check"></i><b>6</b> Работа с реальными данными</a><ul>
<li class="chapter" data-level="6.1" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#рабочая-директория"><i class="fa fa-check"></i><b>6.1</b> Рабочая директория</a></li>
<li class="chapter" data-level="6.2" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#импорт-данных"><i class="fa fa-check"></i><b>6.2</b> Импорт данных</a><ul>
<li class="chapter" data-level="6.2.1" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#форматы-данных"><i class="fa fa-check"></i><b>6.2.1</b> Форматы данных</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="работа-с-реальными-данными.html"><a href="работа-с-реальными-данными.html#исследование-данных"><i class="fa fa-check"></i><b>6.3</b> Исследование данных</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="предобработка-данных-концепция-tidy-data.html"><a href="предобработка-данных-концепция-tidy-data.html"><i class="fa fa-check"></i><b>7</b> Предобработка данных. Концепция tidy data</a></li>
<li class="chapter" data-level="8" data-path="визуализация-данных.html"><a href="визуализация-данных.html"><i class="fa fa-check"></i><b>8</b> Визуализация данных</a></li>
<li class="part"><span><b>II Теория вероятностей и математическая статистика</b></span></li>
<li class="chapter" data-level="9" data-path="математический-ликбез.html"><a href="математический-ликбез.html"><i class="fa fa-check"></i><b>9</b> Математический ликбез</a><ul>
<li class="chapter" data-level="9.1" data-path="математический-ликбез.html"><a href="математический-ликбез.html#элементы-алгебры-логики"><i class="fa fa-check"></i><b>9.1</b> Элементы алгебры логики</a></li>
<li class="chapter" data-level="9.2" data-path="математический-ликбез.html"><a href="математический-ликбез.html#элементы-теории-множеств"><i class="fa fa-check"></i><b>9.2</b> Элементы теории множеств</a></li>
<li class="chapter" data-level="9.3" data-path="математический-ликбез.html"><a href="математический-ликбез.html#элементы-математического-анализа"><i class="fa fa-check"></i><b>9.3</b> Элементы математического анализа</a></li>
<li class="chapter" data-level="9.4" data-path="математический-ликбез.html"><a href="математический-ликбез.html#matrix"><i class="fa fa-check"></i><b>9.4</b> Элементы линейной алгебры</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="введение-в-статистику.html"><a href="введение-в-статистику.html"><i class="fa fa-check"></i><b>10</b> Введение в статистику</a></li>
<li class="chapter" data-level="11" data-path="случайный-эксперимент.html"><a href="случайный-эксперимент.html"><i class="fa fa-check"></i><b>11</b> Случайный эксперимент</a></li>
<li class="chapter" data-level="12" data-path="вероятность-и-случайные-величины.html"><a href="вероятность-и-случайные-величины.html"><i class="fa fa-check"></i><b>12</b> Вероятность и случайные величины</a></li>
<li class="chapter" data-level="13" data-path="оценивание-параметров-в-практике-статистического-анализа.html"><a href="оценивание-параметров-в-практике-статистического-анализа.html"><i class="fa fa-check"></i><b>13</b> Оценивание параметров в практике статистического анализа</a></li>
<li class="chapter" data-level="14" data-path="тестирование-статистических-гипотез.html"><a href="тестирование-статистических-гипотез.html"><i class="fa fa-check"></i><b>14</b> Тестирование статистических гипотез</a></li>
<li class="part"><span><b>III Анализ данных</b></span></li>
<li class="chapter" data-level="15" data-path="описательные-статистики.html"><a href="описательные-статистики.html"><i class="fa fa-check"></i><b>15</b> Описательные статистики</a><ul>
<li class="chapter" data-level="15.1" data-path="описательные-статистики.html"><a href="описательные-статистики.html#меры-центральной-тенденции"><i class="fa fa-check"></i><b>15.1</b> Меры центральной тенденции</a><ul>
<li class="chapter" data-level="15.1.1" data-path="описательные-статистики.html"><a href="описательные-статистики.html#мода"><i class="fa fa-check"></i><b>15.1.1</b> Мода</a></li>
<li class="chapter" data-level="15.1.2" data-path="описательные-статистики.html"><a href="описательные-статистики.html#медиана"><i class="fa fa-check"></i><b>15.1.2</b> Медиана</a></li>
<li class="chapter" data-level="15.1.3" data-path="описательные-статистики.html"><a href="описательные-статистики.html#среднее"><i class="fa fa-check"></i><b>15.1.3</b> Среднее</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="описательные-статистики.html"><a href="описательные-статистики.html#меры-разброса"><i class="fa fa-check"></i><b>15.2</b> Меры разброса</a><ul>
<li class="chapter" data-level="15.2.1" data-path="описательные-статистики.html"><a href="описательные-статистики.html#минимум-и-максимум"><i class="fa fa-check"></i><b>15.2.1</b> Минимум и максимум</a></li>
<li class="chapter" data-level="15.2.2" data-path="описательные-статистики.html"><a href="описательные-статистики.html#размах"><i class="fa fa-check"></i><b>15.2.2</b> Размах</a></li>
<li class="chapter" data-level="15.2.3" data-path="описательные-статистики.html"><a href="описательные-статистики.html#дисперсия"><i class="fa fa-check"></i><b>15.2.3</b> Дисперсия</a></li>
<li class="chapter" data-level="15.2.4" data-path="описательные-статистики.html"><a href="описательные-статистики.html#стандартное-отклонение"><i class="fa fa-check"></i><b>15.2.4</b> Стандартное отклонение</a></li>
<li class="chapter" data-level="15.2.5" data-path="описательные-статистики.html"><a href="описательные-статистики.html#стандартная-ошибка-среднего"><i class="fa fa-check"></i><b>15.2.5</b> Стандартная ошибка среднего</a></li>
<li class="chapter" data-level="15.2.6" data-path="описательные-статистики.html"><a href="описательные-статистики.html#квантили"><i class="fa fa-check"></i><b>15.2.6</b> Квантили</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="описательные-статистики.html"><a href="описательные-статистики.html#асимметрия"><i class="fa fa-check"></i><b>15.3</b> Асимметрия</a></li>
<li class="chapter" data-level="15.4" data-path="описательные-статистики.html"><a href="описательные-статистики.html#эксцесс"><i class="fa fa-check"></i><b>15.4</b> Эксцесс</a></li>
<li class="chapter" data-level="15.5" data-path="описательные-статистики.html"><a href="описательные-статистики.html#описательные-статистики-в-r"><i class="fa fa-check"></i><b>15.5</b> Описательные статистики в R</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html"><i class="fa fa-check"></i><b>16</b> Корреляционный анализ</a><ul>
<li class="chapter" data-level="16.1" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#ковариация"><i class="fa fa-check"></i><b>16.1</b> Ковариация</a></li>
<li class="chapter" data-level="16.2" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#корреляция"><i class="fa fa-check"></i><b>16.2</b> Корреляция</a><ul>
<li class="chapter" data-level="16.2.1" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#тестирование-статистической-значимости-коэффициента-корреляции"><i class="fa fa-check"></i><b>16.2.1</b> Тестирование статистической значимости коэффициента корреляции</a></li>
<li class="chapter" data-level="16.2.2" data-path="корреляционный-анализ.html"><a href="корреляционный-анализ.html#доверительный-интервал-для-коэффициента-корреляции"><i class="fa fa-check"></i><b>16.2.2</b> Доверительный интервал для коэффициента корреляции</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="общие-линейные-модели-простая-линейная-регрессия.html"><a href="общие-линейные-модели-простая-линейная-регрессия.html"><i class="fa fa-check"></i><b>17</b> Общие линейные модели. Простая линейная регрессия</a></li>
<li class="chapter" data-level="18" data-path="множественная-линейная-регрессия.html"><a href="множественная-линейная-регрессия.html"><i class="fa fa-check"></i><b>18</b> Множественная линейная регрессия</a></li>
<li class="chapter" data-level="19" data-path="дисперсионный-анализ.html"><a href="дисперсионный-анализ.html"><i class="fa fa-check"></i><b>19</b> Дисперсионный анализ</a></li>
<li class="chapter" data-level="20" data-path="ковариационный-анализ.html"><a href="ковариационный-анализ.html"><i class="fa fa-check"></i><b>20</b> Ковариационный анализ</a></li>
<li class="chapter" data-level="21" data-path="обобщенные-линейные-модели-логистическая-регрессия.html"><a href="обобщенные-линейные-модели-логистическая-регрессия.html"><i class="fa fa-check"></i><b>21</b> Обобщенные линейные модели. Логистическая регрессия</a></li>
<li class="chapter" data-level="22" data-path="пуассоновская-регрессия.html"><a href="пуассоновская-регрессия.html"><i class="fa fa-check"></i><b>22</b> Пуассоновская регрессия</a></li>
<li class="chapter" data-level="23" data-path="регуляризация-регрессии.html"><a href="регуляризация-регрессии.html"><i class="fa fa-check"></i><b>23</b> Регуляризация регрессии</a></li>
<li class="chapter" data-level="24" data-path="смешанные-линейные-модели.html"><a href="смешанные-линейные-модели.html"><i class="fa fa-check"></i><b>24</b> Смешанные линейные модели</a></li>
<li class="chapter" data-level="25" data-path="кластерный-анализ.html"><a href="кластерный-анализ.html"><i class="fa fa-check"></i><b>25</b> Кластерный анализ</a></li>
<li class="chapter" data-level="26" data-path="анализ-главных-компонент.html"><a href="анализ-главных-компонент.html"><i class="fa fa-check"></i><b>26</b> Анализ главных компонент</a></li>
<li class="chapter" data-level="27" data-path="эксплораторный-факторный-анализ.html"><a href="эксплораторный-факторный-анализ.html"><i class="fa fa-check"></i><b>27</b> Эксплораторный факторный анализ</a></li>
<li class="chapter" data-level="28" data-path="конфирматорный-факторный-анализ.html"><a href="конфирматорный-факторный-анализ.html"><i class="fa fa-check"></i><b>28</b> Конфирматорный факторный анализ</a></li>
<li class="chapter" data-level="29" data-path="что-дальше.html"><a href="что-дальше.html"><i class="fa fa-check"></i><b>29</b> Что дальше?</a></li>
<li class="appendix"><span><b>Приложения</b></span></li>
<li class="chapter" data-level="A" data-path="iron.html"><a href="iron.html"><i class="fa fa-check"></i><b>A</b> Данные и железо</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html"><i class="fa fa-check"></i>Литература</a><ul>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#касаемо-математики"><i class="fa fa-check"></i>Касаемо математики</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#относительно-статистики"><i class="fa fa-check"></i>Относительно статистики</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#about-r"><i class="fa fa-check"></i>About R</a></li>
<li class="chapter" data-level="" data-path="литература.html"><a href="литература.html#во-славу-андана"><i class="fa fa-check"></i>Во славу андана</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HSE UX LAB | Анализ данных + R: мир линейных моделей | Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="strings" class="section level1">
<h1><span class="header-section-number">5</span> Строки</h1>
<p>Мы уже знакомились со строковым типом данных <code>character</code>. Но мы обозначили, что многие операции над этим типом невозможны (например, нельзя сложить две строки). Возникает вопрос: что делать?</p>
<p>Для начала научимся ставить дополнительные пакеты.</p>
<div id="установка-дополнительных-пакетов" class="section level2">
<h2><span class="header-section-number">5.1</span> Установка дополнительных пакетов</h2>
<p>В самом начале мы <a href="знакомство-с-r-и-rstudio.html#whyr">упоминали</a>, что R имеет большие возможности расширения функционала с помощью специальных пакетов. Для работы со строками нам будут нужны два — <code>stringi</code> («стринг-ай») и <code>stringr</code> («стринг-ар»). На их примере мы и разберем механизм установки и подключения дополнительных пакетов.</p>
<p><strong>Пакет</strong> — это набор функций, не входящих в «базовую комплектацию R», которые, как правило, специализированы под те или иные задачи. В нашем случае — под работу со строками. Поэтому сначала пакет необходимо скачать на комп:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="strings.html#cb1-1"></a><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;stringi&quot;</span>, <span class="st">&quot;stringr&quot;</span>))</span></code></pre></div>
<p>В функцию <code>install.packages()</code> необходимо передать <em>строковый вектор</em>, содержащий названия пакетов, которые мы бы хотели установить.</p>
<p>Часто одни пакеты ссылаются на функции других, поэтому можно указать в аргументе <code>dependencies</code> <code>TRUE</code>, чтобы попутно установились <em>зависимые</em> пакеты.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="strings.html#cb2-1"></a><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;stringi&quot;</span>, <span class="st">&quot;stringr&quot;</span>), <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<blockquote>
<p>По умолчанию пакеты скачиваются с репозитория <strong>CRAN</strong> — основное хранилище, где лежит подавляющее большинство пакетов и всякого разного. Но может быть такое, что установить соединение с этим репозиторием по каким-либо причинам не получается. Чтобы пофиксить сей баг, нужно указать в настройках какое-либо из зеркал. <code>Options → Packages → Primary CRAN repository → Change…</code>, и выбрать что-то. Если не помогло — попробуйте ещё.</p>
</blockquote>
<p>Но мало просто скачать пакет. Надо его ещё подключить к текущей сессии, в которой мы работаем. Для этого используется функция</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="strings.html#cb3-1"></a><span class="kw">library</span>(stringi)</span>
<span id="cb3-2"><a href="strings.html#cb3-2"></a><span class="kw">library</span>(stringr)</span></code></pre></div>
<p>Ей уже надо скормить название пакета без кавычек, и для подключения каждого пакета потребуется написать новую строчку.</p>
<blockquote>
<p>Тут запутываются термины «пакет» и «библиотека», но опустим эти детали и примем сей момент как есть…</p>
</blockquote>
<p>После того, как мы подключили пакет к данной сессии, мы можем использовать функции из него.</p>
<p>Кайф, поехали!</p>
</div>
<div id="создание-строк" class="section level2">
<h2><span class="header-section-number">5.2</span> Создание строк</h2>
<p>Можно сделать строку руками (наблюдайте за кавычками):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="strings.html#cb4-1"></a>s1 &lt;-<span class="st"> &quot;сложившаяся структура организации влечет за собой процесс внедрения и модернизации новых предложений&quot;</span></span>
<span id="cb4-2"><a href="strings.html#cb4-2"></a>s1</span></code></pre></div>
<pre><code>## [1] &quot;сложившаяся структура организации влечет за собой процесс внедрения и модернизации новых предложений&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="strings.html#cb6-1"></a>s2 &lt;-<span class="st"> &#39;С другой стороны постоянный количественный &quot;рост&quot; и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&#39;</span></span>
<span id="cb6-2"><a href="strings.html#cb6-2"></a>s2</span></code></pre></div>
<pre><code>## [1] &quot;С другой стороны постоянный количественный \&quot;рост\&quot; и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&quot;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="strings.html#cb8-1"></a>s3 &lt;-<span class="st"> &quot;С другой стороны постоянный количественный &quot;</span>рост<span class="st">&quot; и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&quot;</span></span>
<span id="cb8-2"><a href="strings.html#cb8-2"></a>s3</span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:52: unexpected symbol
## 1: s3 &lt;- &quot;С другой стороны постоянный количественный &quot;рост
##                                                        ^</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="strings.html#cb10-1"></a>s4 &lt;-<span class="st"> &quot;С другой стороны постоянный количественный &#39;рост&#39; и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&quot;</span></span>
<span id="cb10-2"><a href="strings.html#cb10-2"></a>s4</span></code></pre></div>
<pre><code>## [1] &quot;С другой стороны постоянный количественный &#39;рост&#39; и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="strings.html#cb12-1"></a>s5 &lt;-<span class="st"> &quot;С другой стороны постоянный количественный «рост» и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&quot;</span></span>
<span id="cb12-2"><a href="strings.html#cb12-2"></a>s5</span></code></pre></div>
<pre><code>## [1] &quot;С другой стороны постоянный количественный «рост» и сфера нашей активности позволяет выполнять важные задания по разработке соответствующий условий активизации&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="strings.html#cb14-1"></a>s6 &lt;-<span class="st"> &quot;&quot;</span> <span class="co"># это пустая строка</span></span>
<span id="cb14-2"><a href="strings.html#cb14-2"></a>s6</span></code></pre></div>
<pre><code>## [1] &quot;&quot;</code></pre>
<p>Также можно использовать функцию <code>character()</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> для создания вектора из пустых строк:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="strings.html#cb16-1"></a><span class="kw">character</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot;</code></pre>
<p>А также функции для приведения типов, которые мы уже обсуждали:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="strings.html#cb18-1"></a><span class="kw">as.character</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">30</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;
## [16] &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot; &quot;21&quot; &quot;22&quot; &quot;23&quot; &quot;24&quot; &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;28&quot; &quot;29&quot; &quot;30&quot;</code></pre>
<p>Кроме того, существуют встроенные текстовые векторы:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="strings.html#cb20-1"></a>letters</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="strings.html#cb22-1"></a>LETTERS</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot;
## [20] &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
&lt;img class=“taskimg” src="img/question.png&gt;
<div class="task">
<p>Есть ещё встроенные векторы, которые содержат названия месяцев и аббревиатуры названий месяцев. Отыщите их.</p>
</div>
<p>Мы умеем генерировать числавые последовательности. Можно также генерировать и строки. Например, когда вы хотите сгенерировать ID для испытуемых не просто как числа, а как уникальные текстовые значения:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="strings.html#cb24-1"></a><span class="kw">stri_rand_strings</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">length =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;qEnGn&quot; &quot;RH6mG&quot; &quot;jNMIZ&quot; &quot;8uHgr&quot; &quot;W6T17&quot; &quot;qA3VQ&quot; &quot;x1I00&quot; &quot;jUSaU&quot; &quot;SaSip&quot;
## [10] &quot;iHjja&quot;</code></pre>
<blockquote>
<p>Фнукции из пакета <code>stringi</code> начинаются с префикса <code>stri</code>, а функции пакета <code>stringr</code> — с префикса <code>str</code>. Их легко можно опознать.</p>
</blockquote>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Средствами <code>stringi</code> можно генерировать не только случайные строки, но и <a href="https://gusarov-group.by/wiki-internet-marketologa/ryba/">«рыбу»-текст</a>. Один из вариант такого текста — широко известный «Lorem ipsum». Найдите функцию, которая генерирует такой текст и сгенерируйте четыре абзаца.</p>
<pre><code>## [1] &quot;Lorem ipsum dolor sit amet, vestibulum pharetra, vitae. Lorem nullam fusce pulvinar, et auctor volutpat mauris at. Nunc dolor non fermentum mauris quam. Enim ac eros tristique placerat dapibus. Purus in blandit laoreet sociis nec. Dui est faucibus nam feugiat, eu dis iaculis placerat. Suscipit, ut nulla eu suscipit urna, et ornare erat. Viverra augue eu dignissim neque lobortis nunc eu non ex dignissim, fames. Turpis pulvinar integer magna integer phasellus dolor. Semper, ultricies facilisis, tempus maximus duis in et. Tristique orci neque id non, diam volutpat potenti aliquet non dolor, sagittis.&quot;                                                                                                                                                                                                                           
## [2] &quot;Nunc curae in mauris sem, est sed. Ex ac, vestibulum aptent dictum accumsan justo. Et lacinia ut, dictumst. Nulla vel ad conubia ex lorem, ultrices pellentesque. Risus sed vitae, sem. Eu convallis taciti in pharetra, nam mollis phasellus efficitur. Nullam justo sapien, sollicitudin. Vivamus, amet etiam dignissim tristique integer rhoncus lacinia.&quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## [3] &quot;Est himenaeos maximus a molestie maecenas metus class interdum. Justo imperdiet feugiat cras felis et taciti turpis, aenean ullamcorper nibh justo gravida. Fames integer eros tempor nulla quis nisi quis augue. Ullamcorper lobortis vitae ad in dictumst in in. Cras cum cursus commodo amet, et etiam mus sed. Ut facilisis leo dictum sed. Eget ac diam efficitur eros, dolor cras hac. Ante interdum ipsum vulputate vitae. Fermentum maximus commodo ligula luctus mus porttitor est dis eu phasellus montes tortor. Semper leo arcu, class neque sed egestas sociosqu mattis magnis nibh volutpat vulputate vitae. Arcu sed sed fermentum nascetur, convallis. Non sollicitudin, fringilla adipiscing, nec. Vivamus id sociosqu in consectetur egestas natoque, tempus lobortis hendrerit sociis. Quis per vehicula lectus iaculis amet rutrum.&quot;
## [4] &quot;Neque ut lectus et integer lorem amet hac a eget. Mauris ut dui non praesent nascetur. Mauris cum diam dictum. Quam placerat habitant senectus. Sed senectus hac felis, cursus vestibulum ut sapien dis. Vel sagittis sociis erat, et. Id tristique curae accumsan nulla auctor, eleifend vel. Nulla nibh commodo neque sed convallis lobortis sed sagittis erat augue a.&quot;</code></pre>
</div>
</div>
<div id="конкатенация-строк" class="section level2">
<h2><span class="header-section-number">5.3</span> Конкатенация строк</h2>
<p>Строки можно соединять воедино:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="strings.html#cb27-1"></a><span class="kw">paste</span>(<span class="st">&#39;first&#39;</span>, <span class="st">&#39;second&#39;</span>, <span class="st">&#39;third&#39;</span>) <span class="co"># базовый R</span></span></code></pre></div>
<pre><code>## [1] &quot;first second third&quot;</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="strings.html#cb29-1"></a><span class="kw">paste</span>(<span class="st">&#39;first&#39;</span>, <span class="st">&#39;second&#39;</span>, <span class="st">&#39;third&#39;</span>, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;first_second_third&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="strings.html#cb31-1"></a><span class="kw">paste0</span>(<span class="st">&#39;first&#39;</span>, <span class="st">&#39;second&#39;</span>, <span class="st">&#39;third&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;firstsecondthird&quot;</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="strings.html#cb33-1"></a><span class="kw">stri_c</span>(<span class="st">&#39;first&#39;</span>, <span class="st">&#39;second&#39;</span>, <span class="st">&#39;third&#39;</span>) <span class="co"># пакет stringi</span></span></code></pre></div>
<pre><code>## [1] &quot;firstsecondthird&quot;</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="strings.html#cb35-1"></a><span class="kw">stri_c</span>(<span class="st">&#39;first&#39;</span>, <span class="st">&#39;second&#39;</span>, <span class="st">&#39;third&#39;</span>, <span class="dt">sep =</span> <span class="st">&quot; &amp; &quot;</span>) <span class="co"># пакет stringi</span></span></code></pre></div>
<pre><code>## [1] &quot;first &amp; second &amp; third&quot;</code></pre>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Сгенерируйте вектор, который будет описывать различные сочетания условий вашего гипотетического эксперимента, который вы сможете добавить в гипотетический датафрейм. Пусть у вас будет десять испытуемых, для каждого из которого в датафрейме предусмотрено четыре строки: две под условие <code>A1</code> и две под условие <code>A2</code>. В свою очередь каждое из условий <code>A</code> может сочетаться с вариантами условия <code>B</code> (<code>B1</code> и <code>B2</code>). В итоге у вас должен получиться вектор, каждое значение которого структурно выглядит так: <code>ID_условиеA_условиеB</code>.</p>
<pre><code>##  [1] &quot;1_A1_B1&quot;  &quot;1_A1_B2&quot;  &quot;1_A2_B1&quot;  &quot;1_A2_B2&quot;  &quot;2_A1_B1&quot;  &quot;2_A1_B2&quot; 
##  [7] &quot;2_A2_B1&quot;  &quot;2_A2_B2&quot;  &quot;3_A1_B1&quot;  &quot;3_A1_B2&quot;  &quot;3_A2_B1&quot;  &quot;3_A2_B2&quot; 
## [13] &quot;4_A1_B1&quot;  &quot;4_A1_B2&quot;  &quot;4_A2_B1&quot;  &quot;4_A2_B2&quot;  &quot;5_A1_B1&quot;  &quot;5_A1_B2&quot; 
## [19] &quot;5_A2_B1&quot;  &quot;5_A2_B2&quot;  &quot;6_A1_B1&quot;  &quot;6_A1_B2&quot;  &quot;6_A2_B1&quot;  &quot;6_A2_B2&quot; 
## [25] &quot;7_A1_B1&quot;  &quot;7_A1_B2&quot;  &quot;7_A2_B1&quot;  &quot;7_A2_B2&quot;  &quot;8_A1_B1&quot;  &quot;8_A1_B2&quot; 
## [31] &quot;8_A2_B1&quot;  &quot;8_A2_B2&quot;  &quot;9_A1_B1&quot;  &quot;9_A1_B2&quot;  &quot;9_A2_B1&quot;  &quot;9_A2_B2&quot; 
## [37] &quot;10_A1_B1&quot; &quot;10_A1_B2&quot; &quot;10_A2_B1&quot; &quot;10_A2_B2&quot;</code></pre>
</div>
</div>
<div id="разделение-строк" class="section level2">
<h2><span class="header-section-number">5.4</span> Разделение строк</h2>
<p>Если добрый коллега записал экспериментальные условия в одну переменную как выше, а вам нужно делать по ним, например, какую-нибудь анову, то можно на него долго ругаться, а можно разделить строки обратно:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="strings.html#cb38-1"></a><span class="kw">str_split</span>(s_exp, <span class="dt">pattern =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;1&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[2]]
## [1] &quot;1&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[3]]
## [1] &quot;1&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[4]]
## [1] &quot;1&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[5]]
## [1] &quot;2&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[6]]
## [1] &quot;2&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[7]]
## [1] &quot;2&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[8]]
## [1] &quot;2&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[9]]
## [1] &quot;3&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[10]]
## [1] &quot;3&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[11]]
## [1] &quot;3&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[12]]
## [1] &quot;3&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[13]]
## [1] &quot;4&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[14]]
## [1] &quot;4&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[15]]
## [1] &quot;4&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[16]]
## [1] &quot;4&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[17]]
## [1] &quot;5&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[18]]
## [1] &quot;5&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[19]]
## [1] &quot;5&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[20]]
## [1] &quot;5&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[21]]
## [1] &quot;6&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[22]]
## [1] &quot;6&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[23]]
## [1] &quot;6&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[24]]
## [1] &quot;6&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[25]]
## [1] &quot;7&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[26]]
## [1] &quot;7&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[27]]
## [1] &quot;7&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[28]]
## [1] &quot;7&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[29]]
## [1] &quot;8&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[30]]
## [1] &quot;8&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[31]]
## [1] &quot;8&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[32]]
## [1] &quot;8&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[33]]
## [1] &quot;9&quot;  &quot;A1&quot; &quot;B1&quot;
## 
## [[34]]
## [1] &quot;9&quot;  &quot;A1&quot; &quot;B2&quot;
## 
## [[35]]
## [1] &quot;9&quot;  &quot;A2&quot; &quot;B1&quot;
## 
## [[36]]
## [1] &quot;9&quot;  &quot;A2&quot; &quot;B2&quot;
## 
## [[37]]
## [1] &quot;10&quot; &quot;A1&quot; &quot;B1&quot;
## 
## [[38]]
## [1] &quot;10&quot; &quot;A1&quot; &quot;B2&quot;
## 
## [[39]]
## [1] &quot;10&quot; &quot;A2&quot; &quot;B1&quot;
## 
## [[40]]
## [1] &quot;10&quot; &quot;A2&quot; &quot;B2&quot;</code></pre>
<p>Нам вернулся список. Шо с ним делать — вопрос хороший. Можно развернуть список в вектор и индексацией вытащить нужные нам части.</p>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Возьмите список, которые вернула функция <code>str_split()</code>, разверните его в вектор с помощью функции <code>unlist()</code> и вытащите из него по отдельности ID, условия <code>A</code> и условия <code>B</code>.</p>
<pre><code>##  [1] &quot;1&quot;  &quot;1&quot;  &quot;1&quot;  &quot;1&quot;  &quot;2&quot;  &quot;2&quot;  &quot;2&quot;  &quot;2&quot;  &quot;3&quot;  &quot;3&quot;  &quot;3&quot;  &quot;3&quot;  &quot;4&quot;  &quot;4&quot;  &quot;4&quot; 
## [16] &quot;4&quot;  &quot;5&quot;  &quot;5&quot;  &quot;5&quot;  &quot;5&quot;  &quot;6&quot;  &quot;6&quot;  &quot;6&quot;  &quot;6&quot;  &quot;7&quot;  &quot;7&quot;  &quot;7&quot;  &quot;7&quot;  &quot;8&quot;  &quot;8&quot; 
## [31] &quot;8&quot;  &quot;8&quot;  &quot;9&quot;  &quot;9&quot;  &quot;9&quot;  &quot;9&quot;  &quot;10&quot; &quot;10&quot; &quot;10&quot; &quot;10&quot;</code></pre>
<pre><code>##  [1] &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot;
## [16] &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot;
## [31] &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot; &quot;A1&quot; &quot;A1&quot; &quot;A2&quot; &quot;A2&quot;</code></pre>
<pre><code>##  [1] &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot;
## [16] &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot;
## [31] &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot; &quot;B1&quot; &quot;B2&quot;</code></pre>
</div>
<p>Но есть более удобная функция <code>separate()</code>, которая разбивает субстроки сразу по колонкам. Её мы вспомним, когда будет говорить о предобработке данных.</p>
</div>
<div id="сортировка-строк" class="section level2">
<h2><span class="header-section-number">5.5</span> Сортировка строк</h2>
<p>Строки можно сортировать:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="strings.html#cb43-1"></a>unsorted_s &lt;-<span class="st"> </span><span class="kw">paste0</span>(</span>
<span id="cb43-2"><a href="strings.html#cb43-2"></a>  <span class="kw">sample</span>(LETTERS, <span class="dt">size =</span> <span class="kw">length</span>(LETTERS), <span class="dt">replace =</span> <span class="ot">TRUE</span>),</span>
<span id="cb43-3"><a href="strings.html#cb43-3"></a>  <span class="kw">sample</span>(letters, <span class="dt">size =</span> <span class="kw">length</span>(letters)),</span>
<span id="cb43-4"><a href="strings.html#cb43-4"></a>  <span class="kw">sample</span>(letters, <span class="dt">size =</span> <span class="kw">length</span>(letters))</span>
<span id="cb43-5"><a href="strings.html#cb43-5"></a>) <span class="co"># делаем несортированный вектор из трёхбуквенных «слов»</span></span>
<span id="cb43-6"><a href="strings.html#cb43-6"></a>unsorted_s</span></code></pre></div>
<pre><code>##  [1] &quot;Rzq&quot; &quot;Ird&quot; &quot;Nic&quot; &quot;Eqg&quot; &quot;Hjs&quot; &quot;Kvb&quot; &quot;Ebr&quot; &quot;Qax&quot; &quot;Ump&quot; &quot;Wno&quot; &quot;Dyu&quot; &quot;Mxe&quot;
## [13] &quot;Ltv&quot; &quot;Bdh&quot; &quot;Net&quot; &quot;Bow&quot; &quot;Xhk&quot; &quot;Jfz&quot; &quot;Lpn&quot; &quot;Tcm&quot; &quot;Swy&quot; &quot;Tsf&quot; &quot;Ekl&quot; &quot;Pli&quot;
## [25] &quot;Vua&quot; &quot;Wgj&quot;</code></pre>
<p>Сортируем:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="strings.html#cb45-1"></a><span class="kw">sort</span>(unsorted_s) <span class="co"># можно базовой функцией</span></span></code></pre></div>
<pre><code>##  [1] &quot;Bdh&quot; &quot;Bow&quot; &quot;Dyu&quot; &quot;Ebr&quot; &quot;Ekl&quot; &quot;Eqg&quot; &quot;Hjs&quot; &quot;Ird&quot; &quot;Jfz&quot; &quot;Kvb&quot; &quot;Lpn&quot; &quot;Ltv&quot;
## [13] &quot;Mxe&quot; &quot;Net&quot; &quot;Nic&quot; &quot;Pli&quot; &quot;Qax&quot; &quot;Rzq&quot; &quot;Swy&quot; &quot;Tcm&quot; &quot;Tsf&quot; &quot;Ump&quot; &quot;Vua&quot; &quot;Wgj&quot;
## [25] &quot;Wno&quot; &quot;Xhk&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="strings.html#cb47-1"></a><span class="kw">str_sort</span>(unsorted_s) <span class="co"># можно функцией из пакета stringr</span></span></code></pre></div>
<pre><code>##  [1] &quot;Bdh&quot; &quot;Bow&quot; &quot;Dyu&quot; &quot;Ebr&quot; &quot;Ekl&quot; &quot;Eqg&quot; &quot;Hjs&quot; &quot;Ird&quot; &quot;Jfz&quot; &quot;Kvb&quot; &quot;Lpn&quot; &quot;Ltv&quot;
## [13] &quot;Mxe&quot; &quot;Net&quot; &quot;Nic&quot; &quot;Pli&quot; &quot;Qax&quot; &quot;Rzq&quot; &quot;Swy&quot; &quot;Tcm&quot; &quot;Tsf&quot; &quot;Ump&quot; &quot;Vua&quot; &quot;Wgj&quot;
## [25] &quot;Wno&quot; &quot;Xhk&quot;</code></pre>
<p>Строки сортируются в <a href="https://ru.wikipedia.org/wiki/Лексикографический_порядок"><em>лексикографическом порядке</em></a>. Обратите внимание, что порядок сортировки зависит от того, в какой <em>локали</em> мы работаем, то есть от того, алфавит какого языка используется для определения лексикографического порядка:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="strings.html#cb49-1"></a><span class="kw">str_sort</span>(<span class="kw">c</span>(<span class="st">&quot;э&quot;</span>, <span class="st">&quot;а&quot;</span>, <span class="st">&quot;у&quot;</span>, <span class="st">&quot;i&quot;</span>), <span class="dt">locale =</span> <span class="st">&#39;en&#39;</span>) <span class="co"># по умолчанию</span></span></code></pre></div>
<pre><code>## [1] &quot;i&quot; &quot;а&quot; &quot;у&quot; &quot;э&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="strings.html#cb51-1"></a><span class="kw">str_sort</span>(<span class="kw">c</span>(<span class="st">&quot;э&quot;</span>, <span class="st">&quot;а&quot;</span>, <span class="st">&quot;у&quot;</span>, <span class="st">&quot;i&quot;</span>), <span class="dt">locale =</span> <span class="st">&#39;ru&#39;</span>) <span class="co"># русский</span></span></code></pre></div>
<pre><code>## [1] &quot;а&quot; &quot;у&quot; &quot;э&quot; &quot;i&quot;</code></pre>
<blockquote>
<p>Сортировок существует <a href="https://www.youtube.com/watch?v=BeoCbJPuvSE">много разных</a>. Но чем больше у вас данные, тем медленнее будет работать базовый <code>sort()</code>. Поэтому используйте <code>str_sort()</code>.</p>
</blockquote>
</div>
<div id="изменение-регистра" class="section level2">
<h2><span class="header-section-number">5.6</span> Изменение регистра</h2>
<p>Допусти вы собирали данные онлайн, и у вас было поле ступень образования, в которой респонденты должны быть указать бакалавриат/магистратура/аспирантура. Но по каким-то причинам, разработчик онлайн-формы не подумал, что хорошо бы сделать это поле списком, из котрого можно выбирать, и оставил его как обычное текстовое поле. Теперь у вас в данных есть «бакалавриат», «Бакалавриат» и какой-нибудь «БАкалавриат», то вообще-то одно и то же. Напасти подобного рода можно победить, если привести строки к единому регистру:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="strings.html#cb53-1"></a><span class="kw">str_to_lower</span>(<span class="kw">c</span>(<span class="st">&quot;Бакалавриат&quot;</span>, <span class="st">&quot;БАКАЛАВРИАТ&quot;</span>, <span class="st">&quot;АСпирантура&quot;</span>, <span class="st">&quot;магистратура&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;бакалавриат&quot;  &quot;бакалавриат&quot;  &quot;аспирантура&quot;  &quot;магистратура&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="strings.html#cb55-1"></a><span class="kw">str_to_upper</span>(<span class="kw">c</span>(<span class="st">&quot;Бакалавриат&quot;</span>, <span class="st">&quot;БАКАЛАВРИАТ&quot;</span>, <span class="st">&quot;АСпирантура&quot;</span>, <span class="st">&quot;магистратура&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;БАКАЛАВРИАТ&quot;  &quot;БАКАЛАВРИАТ&quot;  &quot;АСПИРАНТУРА&quot;  &quot;МАГИСТРАТУРА&quot;</code></pre>
<blockquote>
<p>Но при таком способе сбора данных могли возникнуть и другие ошибки, так что лучше задуматься об их предотвращении заранее!</p>
</blockquote>
</div>
<div id="поиск-подстроки" class="section level2">
<h2><span class="header-section-number">5.7</span> Поиск подстроки</h2>
<p>Если нам надо найти какую-то подстроку, то мы можем использоваться функцию <code>str_detect()</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="strings.html#cb57-1"></a><span class="kw">str_detect</span>(unsorted_s, <span class="st">&#39;b&#39;</span>) <span class="co"># ищем все элементы, в которых есть маленькая «b»</span></span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
## [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [25] FALSE FALSE</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="strings.html#cb59-1"></a>unsorted_s[<span class="kw">str_detect</span>(unsorted_s, <span class="st">&#39;b&#39;</span>)] <span class="co"># а вот и сами элементы</span></span></code></pre></div>
<pre><code>## [1] &quot;Kvb&quot; &quot;Ebr&quot;</code></pre>
<p>Можно подсчитать число вхождений подстроки в строке:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="strings.html#cb61-1"></a><span class="kw">str_count</span>(unsorted_s, <span class="st">&#39;a&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0</code></pre>
</div>
<div id="изменение-строк" class="section level2">
<h2><span class="header-section-number">5.8</span> Изменение строк</h2>
<p>Раз мы умеем искать подстроку, то, наверное, её можно и как-то изменять.</p>
<div id="выделение-подстроки" class="section level3">
<h3><span class="header-section-number">5.8.1</span> Выделение подстроки</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="strings.html#cb63-1"></a><span class="kw">str_sub</span>(unsorted_s, <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">end =</span> <span class="dv">2</span>) <span class="co"># по индексам</span></span></code></pre></div>
<pre><code>##  [1] &quot;Rz&quot; &quot;Ir&quot; &quot;Ni&quot; &quot;Eq&quot; &quot;Hj&quot; &quot;Kv&quot; &quot;Eb&quot; &quot;Qa&quot; &quot;Um&quot; &quot;Wn&quot; &quot;Dy&quot; &quot;Mx&quot; &quot;Lt&quot; &quot;Bd&quot; &quot;Ne&quot;
## [16] &quot;Bo&quot; &quot;Xh&quot; &quot;Jf&quot; &quot;Lp&quot; &quot;Tc&quot; &quot;Sw&quot; &quot;Ts&quot; &quot;Ek&quot; &quot;Pl&quot; &quot;Vu&quot; &quot;Wg&quot;</code></pre>
</div>
<div id="замена-подстроки" class="section level3">
<h3><span class="header-section-number">5.8.2</span> Замена подстроки</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="strings.html#cb65-1"></a><span class="kw">str_replace</span>(unsorted_s, <span class="dt">pattern =</span> <span class="st">&quot;b&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;Ц&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;Rzq&quot; &quot;Ird&quot; &quot;Nic&quot; &quot;Eqg&quot; &quot;Hjs&quot; &quot;KvЦ&quot; &quot;EЦr&quot; &quot;Qax&quot; &quot;Ump&quot; &quot;Wno&quot; &quot;Dyu&quot; &quot;Mxe&quot;
## [13] &quot;Ltv&quot; &quot;Bdh&quot; &quot;Net&quot; &quot;Bow&quot; &quot;Xhk&quot; &quot;Jfz&quot; &quot;Lpn&quot; &quot;Tcm&quot; &quot;Swy&quot; &quot;Tsf&quot; &quot;Ekl&quot; &quot;Pli&quot;
## [25] &quot;Vua&quot; &quot;Wgj&quot;</code></pre>
</div>
<div id="удаление-подстроки" class="section level3">
<h3><span class="header-section-number">5.8.3</span> Удаление подстроки</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="strings.html#cb67-1"></a><span class="kw">str_remove</span>(unsorted_s, <span class="st">&#39;b&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;Rzq&quot; &quot;Ird&quot; &quot;Nic&quot; &quot;Eqg&quot; &quot;Hjs&quot; &quot;Kv&quot;  &quot;Er&quot;  &quot;Qax&quot; &quot;Ump&quot; &quot;Wno&quot; &quot;Dyu&quot; &quot;Mxe&quot;
## [13] &quot;Ltv&quot; &quot;Bdh&quot; &quot;Net&quot; &quot;Bow&quot; &quot;Xhk&quot; &quot;Jfz&quot; &quot;Lpn&quot; &quot;Tcm&quot; &quot;Swy&quot; &quot;Tsf&quot; &quot;Ekl&quot; &quot;Pli&quot;
## [25] &quot;Vua&quot; &quot;Wgj&quot;</code></pre>
</div>
<div id="транслитерация-строк" class="section level3">
<h3><span class="header-section-number">5.8.4</span> Транслитерация строк</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="strings.html#cb69-1"></a><span class="kw">stri_trans_general</span>(<span class="st">&quot;русский текст, который должен быть написан латиницей&quot;</span>,</span>
<span id="cb69-2"><a href="strings.html#cb69-2"></a>                   <span class="st">&#39;cyrillic-latin&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;russkij tekst, kotoryj dolžen bytʹ napisan latinicej&quot;</code></pre>
</div>
</div>
<div id="регулярные-выражения" class="section level2">
<h2><span class="header-section-number">5.9</span> Регулярные выражения</h2>
<p>Но часто нас интересует не конкретная подстрока, и все варианты подстрок, которые имеют определенную структуру. Например, мы хотим найти корректно введенные даты рождения в нашем датасете. Пусть по условию дата должна иметь формат <code>DD.MM.YYYY</code>. И у нас есть вот такой вектор:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="strings.html#cb71-1"></a>dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;21.92.2001&#39;</span>, <span class="st">&#39;01.04.1994&#39;</span>, <span class="st">&#39;5-3-2011&#39;</span>, <span class="st">&#39;6/04/1999&#39;</span>)</span></code></pre></div>
<p>Ну, так как у нас сейчас совсем игрушечные данные, мы можем смотреть на них глазами и видеть, что у нас в прицнипе три адекватные даты, но записаны по-разному, и одна верного формата, но с 92 месяцем.</p>
<p>Чтобы задать структуру паттерна, который мы хотим найти, используются <strong>регулярные выражения</strong>.</p>
<blockquote>
<p>Чтобы отображать их работу, будем пользоваться функцией <code>str_view_all()</code>.</p>
</blockquote>
<div id="метасимволы" class="section level3">
<h3><span class="header-section-number">5.9.1</span> Метасимволы</h3>
<p>Если мы попробуем поискать точки в наших датах, то просто так мы их не найдем:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="strings.html#cb72-1"></a><span class="kw">str_view_all</span>(dates, <span class="dt">pattern =</span> <span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-bf7a40ddac2e8ac1e1cf" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-bf7a40ddac2e8ac1e1cf">{"x":{"html":"<ul>\n  <li><span class='match'>2<\/span><span class='match'>1<\/span><span class='match'>.<\/span><span class='match'>9<\/span><span class='match'>2<\/span><span class='match'>.<\/span><span class='match'>2<\/span><span class='match'>0<\/span><span class='match'>0<\/span><span class='match'>1<\/span><\/li>\n  <li><span class='match'>0<\/span><span class='match'>1<\/span><span class='match'>.<\/span><span class='match'>0<\/span><span class='match'>4<\/span><span class='match'>.<\/span><span class='match'>1<\/span><span class='match'>9<\/span><span class='match'>9<\/span><span class='match'>4<\/span><\/li>\n  <li><span class='match'>5<\/span><span class='match'>-<\/span><span class='match'>3<\/span><span class='match'>-<\/span><span class='match'>2<\/span><span class='match'>0<\/span><span class='match'>1<\/span><span class='match'>1<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>/<\/span><span class='match'>0<\/span><span class='match'>4<\/span><span class='match'>/<\/span><span class='match'>1<\/span><span class='match'>9<\/span><span class='match'>9<\/span><span class='match'>9<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Подсветились все символы, так как точка в регулярных выражениях — <a href="strings.html#quant">специальный символ</a>. Поэтому чтобы указать, что нас интересуют собственно точки, нужно их <em>экранировать</em>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="strings.html#cb73-1"></a><span class="kw">str_view_all</span>(dates, <span class="dt">pattern =</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">.&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-0863335997a068311172" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-0863335997a068311172">{"x":{"html":"<ul>\n  <li>21<span class='match'>.<\/span>92<span class='match'>.<\/span>2001<\/li>\n  <li>01<span class='match'>.<\/span>04<span class='match'>.<\/span>1994<\/li>\n  <li>5-3-2011<\/li>\n  <li>6/04/1999<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Так лучше. Еще к специальным знакам (метасимфолам) относятся <code>$</code>, <code>*</code>, <code>+</code>, <code>?</code>, <code>^</code>, <code>[</code>, <code>]</code>, и другие.</p>
</div>
<div id="классы-знаков" class="section level3">
<h3><span class="header-section-number">5.9.2</span> Классы знаков</h3>
<p>В датах нас интересуют цифры, и для них есть специальное обозначение:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="strings.html#cb74-1"></a><span class="kw">str_view_all</span>(dates, <span class="dt">pattern =</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">d&#39;</span>) <span class="co"># ищем цифры</span></span></code></pre></div>
<div id="htmlwidget-b5fab8f98148f430ce85" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-b5fab8f98148f430ce85">{"x":{"html":"<ul>\n  <li><span class='match'>2<\/span><span class='match'>1<\/span>.<span class='match'>9<\/span><span class='match'>2<\/span>.<span class='match'>2<\/span><span class='match'>0<\/span><span class='match'>0<\/span><span class='match'>1<\/span><\/li>\n  <li><span class='match'>0<\/span><span class='match'>1<\/span>.<span class='match'>0<\/span><span class='match'>4<\/span>.<span class='match'>1<\/span><span class='match'>9<\/span><span class='match'>9<\/span><span class='match'>4<\/span><\/li>\n  <li><span class='match'>5<\/span>-<span class='match'>3<\/span>-<span class='match'>2<\/span><span class='match'>0<\/span><span class='match'>1<\/span><span class='match'>1<\/span><\/li>\n  <li><span class='match'>6<\/span>/<span class='match'>0<\/span><span class='match'>4<\/span>/<span class='match'>1<\/span><span class='match'>9<\/span><span class='match'>9<\/span><span class='match'>9<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="strings.html#cb75-1"></a><span class="kw">str_view_all</span>(dates, <span class="dt">pattern =</span> <span class="st">&#39;</span><span class="ch">\\</span><span class="st">D&#39;</span>) <span class="co"># ищем не-цифры</span></span></code></pre></div>
<div id="htmlwidget-cd845cbcbeb69ac9929e" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-cd845cbcbeb69ac9929e">{"x":{"html":"<ul>\n  <li>21<span class='match'>.<\/span>92<span class='match'>.<\/span>2001<\/li>\n  <li>01<span class='match'>.<\/span>04<span class='match'>.<\/span>1994<\/li>\n  <li>5<span class='match'>-<\/span>3<span class='match'>-<\/span>2011<\/li>\n  <li>6<span class='match'>/<\/span>04<span class='match'>/<\/span>1999<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Другие классы символов можно найти в следующих примерах:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="strings.html#cb76-1"></a><span class="kw">str_view_all</span>(<span class="st">&#39;успешный балбес&#39;</span>, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">s&#39;</span>) <span class="co"># пробелы</span></span></code></pre></div>
<div id="htmlwidget-665c39bb3059df7c8b45" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-665c39bb3059df7c8b45">{"x":{"html":"<ul>\n  <li>успешный<span class='match'> <\/span>балбес<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="strings.html#cb77-1"></a><span class="kw">str_view_all</span>(<span class="st">&#39;успешный балбес&#39;</span>, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">S&#39;</span>) <span class="co"># не-пробелы</span></span></code></pre></div>
<div id="htmlwidget-04b54b1ec982ce322fa1" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-04b54b1ec982ce322fa1">{"x":{"html":"<ul>\n  <li><span class='match'>у<\/span><span class='match'>с<\/span><span class='match'>п<\/span><span class='match'>е<\/span><span class='match'>ш<\/span><span class='match'>н<\/span><span class='match'>ы<\/span><span class='match'>й<\/span> <span class='match'>б<\/span><span class='match'>а<\/span><span class='match'>л<\/span><span class='match'>б<\/span><span class='match'>е<\/span><span class='match'>с<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="strings.html#cb78-1"></a><span class="kw">str_view_all</span>(<span class="st">&#39;верно ведь, что здесь что-то есть&#39;</span>, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">w&#39;</span>) <span class="co"># не пробелы и не знаки препинания</span></span></code></pre></div>
<div id="htmlwidget-53a837c76dd9cc8504b6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-53a837c76dd9cc8504b6">{"x":{"html":"<ul>\n  <li><span class='match'>в<\/span><span class='match'>е<\/span><span class='match'>р<\/span><span class='match'>н<\/span><span class='match'>о<\/span> <span class='match'>в<\/span><span class='match'>е<\/span><span class='match'>д<\/span><span class='match'>ь<\/span>, <span class='match'>ч<\/span><span class='match'>т<\/span><span class='match'>о<\/span> <span class='match'>з<\/span><span class='match'>д<\/span><span class='match'>е<\/span><span class='match'>с<\/span><span class='match'>ь<\/span> <span class='match'>ч<\/span><span class='match'>т<\/span><span class='match'>о<\/span>-<span class='match'>т<\/span><span class='match'>о<\/span> <span class='match'>е<\/span><span class='match'>с<\/span><span class='match'>т<\/span><span class='match'>ь<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="strings.html#cb79-1"></a><span class="kw">str_view_all</span>(<span class="st">&#39;верно ведь, что здесь что-то есть&#39;</span>, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">W&#39;</span>) <span class="co"># пробелы и знаки препинания</span></span></code></pre></div>
<div id="htmlwidget-f7e04cb4148d12fd81f8" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-f7e04cb4148d12fd81f8">{"x":{"html":"<ul>\n  <li>верно<span class='match'> <\/span>ведь<span class='match'>,<\/span><span class='match'> <\/span>что<span class='match'> <\/span>здесь<span class='match'> <\/span>что<span class='match'>-<\/span>то<span class='match'> <\/span>есть<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="quant" class="section level3">
<h3><span class="header-section-number">5.9.3</span> Квантификация</h3>
<p>Можно указать, сколько раз должен встречаться тот или иной символ:</p>
<ul>
<li><code>?</code> — ноль или один раз</li>
<li><code>*</code> — ноль или более раз</li>
<li><code>+</code> — один или более раз</li>
<li><code>{n}</code> — n раз</li>
</ul>
<p>Например, найдем все группировки по два числа:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="strings.html#cb80-1"></a><span class="kw">str_view_all</span>(dates, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">d{2}&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-109dc2c51574424c0201" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-109dc2c51574424c0201">{"x":{"html":"<ul>\n  <li><span class='match'>21<\/span>.<span class='match'>92<\/span>.<span class='match'>20<\/span><span class='match'>01<\/span><\/li>\n  <li><span class='match'>01<\/span>.<span class='match'>04<\/span>.<span class='match'>19<\/span><span class='match'>94<\/span><\/li>\n  <li>5-3-<span class='match'>20<\/span><span class='match'>11<\/span><\/li>\n  <li>6/<span class='match'>04<\/span>/<span class='match'>19<\/span><span class='match'>99<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Итак, теперь мы можем вытащить все корректные даты, которые есть в нашем векторе:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="strings.html#cb81-1"></a><span class="kw">str_view_all</span>(dates, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">d{2}</span><span class="ch">\\</span><span class="st">.[01]</span><span class="ch">\\</span><span class="st">d{1}</span><span class="ch">\\</span><span class="st">.</span><span class="ch">\\</span><span class="st">d{4}&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-8120194bf1997f04d872" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-8120194bf1997f04d872">{"x":{"html":"<ul>\n  <li>21.92.2001<\/li>\n  <li><span class='match'>01.04.1994<\/span><\/li>\n  <li>5-3-2011<\/li>\n  <li>6/04/1999<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Она получилась всего одна. Но в целом в нашим набором условий это справедливо.</p>
<img class="taskimg" src="img/code.png">
<div class="task">
<p>Как мы отмечали выше, в нашем векторе в датами есть ещё две даты, который выглядят адекватно, но немного отличаются форматом, в котором они записаны. Подправьте их формат с помощью функций, изученных выше, и измените регулярное выражение так, чтобы оно обнаруживало и их тоже.</p>
<p><em>Подсказка: возможно, вам понадобятся некоторые варианты выше упомянутых функций.</em></p>
<div id="htmlwidget-4abf3a35596c75453c48" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-4abf3a35596c75453c48">{"x":{"html":"<ul>\n  <li>21.92.2001<\/li>\n  <li><span class='match'>01.04.1994<\/span><\/li>\n  <li><span class='match'>5.3.2011<\/span><\/li>\n  <li><span class='match'>6.04.1999<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Ещё есть <code>numeric()</code> и <code>logical()</code>, например.<a href="strings.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="работа-с-реальными-данными.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["wlm2021-book.pdf", "wlm2021-book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
