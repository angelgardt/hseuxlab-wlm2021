# (PART) R programming {-}
# Знакомство с R и RStudio

> _--- Я вот не могу выбрать: делать на R или на Python? <br>
> --- Да какая разница! Главное --- делай!_

## Что это и откуда?

[**R**](https://www.r-project.org/) --- популярный язык программирования среди исследователей в социальных и гуманитарных науках. Если совсем коротко, то начиналось всё с языка [**S**](https://en.wikipedia.org/wiki/S_(programming_language)), который был языком программирования для статистического анализа. Потом его [доработали](https://www.researchgate.net/publication/240040602_Evaluating_the_Design_of_the_R_Language) и получился **R**.

Хотя сегодня всё ещё можно услышать, что «R --- это язык программирования для статистической обработки данных», это [ложь](https://en.wikipedia.org/wiki/False_(logic)). Да, когда-то [давно](https://en.wikipedia.org/wiki/Devonian) дела обстояли именно так, но сейчас **R** --- это полноценный язык программирования, который позволяет решать широкий спект задач от статистического анализа и data wrangling до машинного обучения, моделирования и создания сайтов и приложений.


## Почему R?

* свободное ПО (часть [GNU Project](https://en.wikipedia.org/wiki/GNU_Project))
* динамично развивается
* громадные возможности расширения функционала
  + более 10 000 пакетов
  + открытый исходный код
  + возможность написать свои
<center>
![](img_number-of-submitted-packages-to-CRAN.png)
</center>
<font size=1>
<p align="right">[_Source_](https://gist.github.com/daroczig/3cf06d6db4be2bbe3368)</p>
</font>
* большое сообщество по всему миру, много ресурсов для задавания вопросов
* [Linear Warriors vs Quadratic Wizards](https://1d4chan.org/wiki/Linear_Warriors,_Quadratic_Wizards)
  + в SPSS (и другие GUI пакеты) ниже порог вхождения, но развитие навыков --- линейное
  + в R порог вхождения выше, но впоследствии случается резкий буст, и вы становитесь богами дата саенс

<center>
![](img_LinearWarriors_QuadraticWizards.png)
</center>
<font size=1>
<p align="right">[_Source_](https://1d4chan.org/wiki/Linear_Warriors,_Quadratic_Wizards)</p>
</font>
* [репродуцируемость](https://en.wikipedia.org/wiki/Reproducibility_Project) результатов

### А он лучше Питона?
<center>
![](img_R-Vs-Python-samaya-aktualnaya-diskussiya-dlya-nachinayushhih-uchenyh-dannyh.jpg)
</center>
<font size=1>
<p align="right">[_Source_](https://andreyex.ru/programmirovanie/r-vs-python-samaya-aktualnaya-diskussiya-dlya-nachinayushhih-uchenyh-dannyh/)</p>
</font>

Нет. Но он и **не хуже**.

Вообще файт **R vs Python**, на мой взгляд, несколько бессмысленный, поскольку, по факту, всё упирается в синтаксис языка. Ну, и запрос работодателя, конечно. Возможности обоих языков и скорость работы сопоставимы. Области применения по большей части тоже. Поэтому я пользуюсь следующей эвристикой:

* аналитика, статистика, графики, покрутить данные --- **R**
* машинное обучение, нейросети, другой ИИ, интерфейсы и [собственно] программирование --- **Python**

Многие, наверняка, оспорят такое разделение --- я же не стану отстаивать его истинность.

Мы будем работать на **R**, поскольку он всё же более популярен в наших кругах --- среди «социально-гуманитарных аналитиков».



## Установка R и RStudio

Чтобы нам радостно и приятно жилось, нужно установить:

* Сначала **R**
  + на [Windows](https://cran.r-project.org/bin/windows/base/)
  + на [Mac](https://cran.r-project.org/bin/macosx/)
  + на [Linux](https://cran.rstudio.com/bin/linux/)
* Затем [**RStudio**](https://www.rstudio.com/products/rstudio/download/)

Если что-то не установилось или вы предпочитаете облачные сервисы, то можно работать через браузер в [RStudio Cloud](https://rstudio.cloud/).


### А зачем обе штуки ставить?

Вопрос не безосновательный. Не углубляясь в мелкие детали, скажем так: R --- это собственно язык программирования, а RStudio --- это среда ([IDE](https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F_%D1%81%D1%80%D0%B5%D0%B4%D0%B0_%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B8), [integrated development environment](https://en.wikipedia.org/wiki/Integrated_development_environment)), которая позволяет в этом языке удобно и просто работать, а также расширяет его возможности.

> RStudio --- не единственная среда для работы в R, но, определённо, самая топовая. Почти все пользуются именно ею, и нет смысла искать что-то более удобное.

## Где спросить вопрос или искать ответ?
* [Google](https://google.com) --- препарат выбора
* [Stack Overflow](https://stackoverflow.com/) --- ответы на вопросы, и не только по R
* [Stack Overflow на русском](https://ru.stackoverflow.com/) --- то же самое, только отечественные специалисты
* [Cookbook for R](http://www.cookbook-r.com/) --- хорошая книжка для старта
* [RStudio Community](https://community.rstudio.com/) --- ответы на вопросы по R
* [R-bloggers](https://www.r-bloggers.com/) --- про новинки в R и рядом с ним
* [Хабр про R](https://habr.com/ru/hub/r/)
* …



## Интерфейс R
Можно, конечно, работать и без RStudio вовсе --- чисто в R. Мы кратенько взглянем на его интерфейс, чтобы наслаждение от встречи с IDE-шкой было больше.

КАРТИНКА

Выглядит весьма по-программистски. Есть окно скрипта, где пишутся команды, есть консоль, в которой они выполняются, иногда открываются окна с графиками. Но, в общем, посмотрели для общего развития --- и хватит. Пора серьезными делами заняться.



## Интерфейс RStudio
Итак, посмотрим на RStudio. При запуске у вас откроется что-то такое:

КАРТИНКА

Видно четыре (или три[^1]) окна. Давайте последовательно разбираться, что в каждом из них происходит.


### Console
В консоль можно писать команды и запускать их нажатием `Enter`. Они будут сразу выполняться. После некоторых команд будет выводиться какой-то результат. С помощью стрелок `↑` и `↓` можно вывести предыдущие команды, например, чтобы запустить их ещё раз, не вводя повторно, или каким-либо образом их изменить.

Можно, в прицнипе, работать только из консоли, но на практике это не очень удобно. Главным образом, из-за того, что команды улетают «вникуда» и к некоторым уже будет нельзя вернуться. Поэтому существует редактор кода.


### Code Editor
По своей сути это обычный блокнот с той лишь разницей, что здесь некоторые слова раскрашены. И в этом блокноте мы пишем _текст_ программы (скрипт), который состоит из комманд. Чтобы выполнить команду, нам необхожимо отправить её в консоль с помощью `Ctrl + Enter` (`Cmd + Enter`). Нажатие `Enter` здесь как и в обычном текстовом редакторе осуществляет переход на новую строку. Результат выполнения команды отображается в консоли, как будто вы изначально запускали команду там.

В консоли удобно что-то быстро поститать, скрипт же удобнее при работе с длинными командами и для сохранения кода (текста) для дальнейшей работы. Чтобы сохранить скрипт, сделайте `File → Save (as…)` или нажмите `Ctrl + S` (`Cmd + S`).

Несмотря на то, что файл сохраняется с расширением _.R_, это всё ещё обычный текст, который можно открыть и редактировать в любом текстовом редакторе (типа _Notebook_ или _TextEdit_).

> К вопросу _текста_ мы ещё вернёмся.


#### Кодировка
Компьютер умеет [хранить в памяти]() только цифры. А текст мы набираем буквами. Поэтому ему приходится перекодировать буквы в цифры. 

При сохранении скрипта важно следить за кодировкой, особенно если в тексте встречаются кириллические знаки. В разных операционных систем разная кодировка по умолчанию, поэтому на другом компьютере файл может открываться с неведомой кракозяброй типа этой:

Обычно при сохрание файла с кириллицей программа автоматически спрашивает, в какой кодировке его надо сохранить. Выбирайте `UTF-8` --- она корректно откроется на любом компьютере. Также вы можете сохранить файл в определенной кодировке в помощью `File → Save with Encoding…`.

Если при открытии файла у вас отображается кракозябра, подобная той, которая показана выше, нужно узнать кодировку файла (для Win это обычно `ASCII`, для Mac --- `UTF-8`) и выполнить `File → Reopen with Encoding…`.


### Environment (Workspace) и History



### Plots, Files, Help, Viewer

## R как калькулятор

## Assignment и переменные


[^1]: При первом запуске может не быть окна Code Editor. Чтобы его открыть, сделайте `File → New File → R Script` или нажмите `Ctrl + Shift + N` (`Cmd + Shift + N`).